(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{115:function(e,t,n){"use strict";n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return N})),n.d(t,"a",(function(){return E})),n.d(t,"g",(function(){return S}));var r=n(15),c=n.n(r),a=n(23),i=n(11),o=n(60),s=n(61),u=n(75),d=u.a.database().ref("/products"),l=u.a.storage().ref("/images"),j=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"isFileExists",value:function(e){return new Promise((function(t){l.child(e).getDownloadURL().then((function(e){console.log("File exists"),t(!0)})).catch((function(){console.log("File doesn't exist"),t(!1)}))}))}},{key:"removeFile",value:function(e){l.child(e).delete().then((function(){console.log("File deleted successfully")})).catch((function(e){console.log(e),console.log("Uh-oh, an error occurred!")}))}},{key:"loadFile",value:function(e,t){return new Promise((function(n){l.child(t).put(e).then(function(){var e=Object(a.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Uploaded a blob or file!"),console.log(t.metadata),e.next=4,new Promise((function(e){l.child(t.metadata.name).getDownloadURL().then((function(n){e([n,t.metadata.name])}))}));case 4:r=e.sent,n(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},{key:"getAll",value:function(){return d}},{key:"get",value:function(e){return d.child(e)}},{key:"create",value:function(e){return d.push(e)}},{key:"update",value:function(e,t){return d.child(e).update(t)}},{key:"delete",value:function(e){return d.child(e).remove()}},{key:"deleteAll",value:function(){return d.remove()}}]),e}()),b=n(37),p="TOGGLE_IS_FETCHING",h="SET_PRODUCTS",f="SELECT_PRODUCT",m="UPDATE_PRODUCT",O="DELETE_PRODUCT",v="SET_LOADED_IMAGE_LINK",g={products:[],isFetching:!0,selectedProduct:null,loadedImageLink:null},x=function(e){return{type:p,isFetching:e}},_=function(e){return{type:h,products:e}},y=function(e){return{type:v,link:e}},w=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.isFileExists(e.name);case 2:return r=t.sent,a=e.name,r&&(i=+new Date,a="".concat(i,"-").concat(a)),console.log(a),t.next=8,Promise.all([j.loadFile(e,a)]).then((function(e){n(y(e[0]))}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0)),e.prev=1,e.next=4,j.getAll().once("value",(function(e){var n=[],r=e.val();for(var c in r){console.log(c);var a=c,i=r[c];n.push({key:a,photo:i.photo,localPhoto:i.localPhoto,description:i.description,name:i.name,price:i.price,discount:i.discount,discountEndTime:i.discountEndTime})}t(_(n))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0.message),console.log(e.t0.code);case 10:t(x(!1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e,t){return{type:m,productKey:e,newData:t}},P=function(e){return{type:O,productKey:e}},F=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0)),t.prev=1,t.next=4,j.get(e).once("value",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.val(),e.next=3,j.removeFile(n.localPhoto);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return t.next=6,j.delete(e);case 6:n(P(e)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code);case 13:n(x(!1));case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0)),t.prev=1,t.next=4,j.get(e).once("value",(function(t){var r;console.log(t.val()),console.log(e),n((r=Object(i.a)(Object(i.a)({},t.val()),{},{key:e}),{type:f,product:r})),n(x(!1))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code),n(x(!1));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0)),t.prev=1,t.next=4,j.create(e);case 4:r=t.sent,console.log(r),n(y(null)),n(Object(b.a)("addProduct")),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code),n(Object(b.b)("addProduct",{_error:t.t0.message}));case 15:n(x(!1));case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e,t){return function(){var n=Object(a.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),n.prev=1,console.log("productKey"+e),n.next=5,j.update(e,t);case 5:r(C(e,t)),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0.message),console.log(n.t0.code),r(Object(b.b)("updateProduct",{_error:n.t0.message}));case 13:r(x(!1));case 14:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(i.a)(Object(i.a)({},e),{},{products:t.products});case f:return Object(i.a)(Object(i.a)({},e),{},{selectedProduct:t.product});case v:return Object(i.a)(Object(i.a)({},e),{},{loadedImageLink:t.link});case m:return Object(i.a)(Object(i.a)({},e),{},{products:e.products.map((function(e){return e.key===t.productKey?e=t.newData:e}))});case O:return Object(i.a)(Object(i.a)({},e),{},{products:e.products.filter((function(e){return e.key!==t.productKey}))});case p:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});default:return Object(i.a)({},e)}}},136:function(e,t,n){"use strict";var r=n(2),c=(n(0),n.p+"static/media/preloader1.81da48ab.gif"),a=n(236),i=n.n(a);t.a=function(e){return Object(r.jsx)("div",{className:i.a.container,children:Object(r.jsx)("img",{src:c})})}},167:function(e,t,n){e.exports={header:"Header_header__3FgV1",loginBlock:"Header_loginBlock__3Vg1n"}},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return P}));n(15),n(23);var r=n(11),c=n(86),a=n(60),i=n(61),o=n(103),s=n(101),u=n(2),d=n(0),l=n.n(d),j=n(27),b=n.n(j),p=n(158),h=n(186),f=n(409),m=n(239),O=n(124),v=n(193),g=n(238),x=n(410),_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).validateImageWidth=function(t){if(t){var n=e.props,r=n.maxWidth,c=n.minWidth;if(t.width>r||t.width<c)return"Image width must be less or equal to ".concat(r,"px and more or equal to ").concat(c,"px")}},e.validateImageHeight=function(t){if(t){var n=e.props,r=n.maxHeight,c=n.minHeight;if(t.height>r||t.height<c)return"Image width must be less or equal to ".concat(r,"px and more or equal to ").concat(c,"px")}},e.validateImageFormat=function(t){if(t){var n=e.props.mimeType;if(!n.includes(t.type))return"Image mime type must be ".concat(n)}},e.handlePreview=function(e){document.querySelector(".preview-image").src=e},e.handleChange=function(t,n){t.preventDefault();var r=t.target.files[0];if(r){var c=URL.createObjectURL(r),a=new window.Image;a.onload=function(){r.width=a.naturalWidth,r.height=a.naturalHeight,n.onChange(r),URL.revokeObjectURL(r)},a.src=c,e.handlePreview(c)}},e.renderFileInput=function(t){var n=t.input,r=t.type,c=t.meta,a=e.props.mimeType;return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{name:n.name,type:r,accept:a,onChange:function(t){return e.handleChange(t,n)}}),c&&c.invalid&&c.error&&Object(u.jsx)(f.a,{negative:!0,header:"Error:",content:c.error})]})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.maxWidth,n=e.maxHeight,r=e.minWidth,c=e.minHeight,a=e.handleSubmit;return Object(u.jsx)(m.a,{centered:!0,style:{height:"100%"},verticalAlign:"middle",padded:!0,className:b.a.wholeForm,children:Object(u.jsx)(m.a.Column,{style:{maxWidth:400},children:Object(u.jsxs)(O.a,{fluid:!0,children:[Object(u.jsx)(v.a,{src:"",alt:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430",className:"preview-image",style:{height:"300px",width:"300px",objectFit:"cover"}}),Object(u.jsxs)(O.a.Content,{children:[Object(u.jsx)(O.a.Header,{className:b.a.header,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),Object(u.jsxs)(O.a.Description,{children:["\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c:",Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"\u0444\u043e\u0440\u043c\u0430\u0442\u0430 JPEG \u0438\u043b\u0438 PNG"}),Object(u.jsxs)("li",{children:[r,"px \u2264 \u0448\u0438\u0440\u0438\u043d\u043e\u0439 \u2264 ",t,"px"]}),Object(u.jsxs)("li",{children:[c,"px \u2264 \u0432\u044b\u0441\u043e\u0442\u043e\u0439 \u2264 ",n,"px"]})]})]})]}),Object(u.jsx)(O.a.Content,{children:Object(u.jsxs)(g.a,{onSubmit:a,children:[Object(u.jsx)(g.a.Field,{children:Object(u.jsx)(p.a,{name:"image",type:"file",validate:[this.validateImageWidth,this.validateImageHeight,this.validateImageFormat],component:this.renderFileInput})}),Object(u.jsx)(x.a,{primary:!0,type:"submit",className:"form-submit-button",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})]})})})}}]),n}(l.a.Component);_.defaultProps={mimeType:"image/jpeg, image/png",maxWidth:4e3,maxHeight:4e3,minWidth:200,minHeight:200};var y=Object(h.a)({form:"imageForm"})(_),w=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,c=t.warning,a=e.children,i=n&&r,o=n&&c;return Object(u.jsxs)("div",{className:b.a.formControl+" "+(i?b.a.error:"")+" "+(o?b.a.warning:""),children:[a,i&&Object(u.jsx)("span",{children:r})||o&&Object(u.jsx)("span",{children:c})]})},k=function(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,["input","meta","child"]));return Object(u.jsx)(w,Object(r.a)(Object(r.a)({},e),{},{children:Object(u.jsx)("input",Object(r.a)(Object(r.a)({},t),n))}))},C=function(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,["input","meta","child"]));return Object(u.jsx)(w,Object(r.a)(Object(r.a)({},e),{},{children:Object(u.jsx)("input",Object(r.a)(Object(r.a)(Object(r.a)({},t),n),{},{readOnly:!0}))}))},P=function(e,t,n,c){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)(p.a,Object(r.a)({placeholder:e,name:t,component:n,validate:c},a)),i]})}},194:function(e,t,n){e.exports={imgSmallContainer:"Product_imgSmallContainer__JX_R7",imgMiddleContainer:"Product_imgMiddleContainer__1TK93",productOperationContainer:"Product_productOperationContainer__2CSib",productContainer:"Product_productContainer__3MSFE",productAdded:"Product_productAdded__3IIyZ",fieldDescr:"Product_fieldDescr__1aSMZ",discount:"Product_discount__184h9",catalog:"Product_catalog__3f8H9"}},195:function(e,t,n){"use strict";var r=n(11),c=n(60),a=n(61),i=n(103),o=n(101),s=n(2),u=n(0),d=n.n(u),l=n(24),j=n(19),b=function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}};t.a=function(e){var t=function(t){Object(i.a)(u,t);var n=Object(o.a)(u);function u(){return Object(c.a)(this,u),n.apply(this,arguments)}return Object(a.a)(u,[{key:"render",value:function(){return this.props.isAuth?Object(s.jsx)(e,Object(r.a)({},this.props)):Object(s.jsx)(j.a,{to:"/signin"})}}]),u}(d.a.Component);return Object(l.b)(b)(t)}},236:function(e,t,n){e.exports={container:"Preloader_container__1VGeq"}},27:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2ZNMf",error:"FormsControls_error__3FPkv",warning:"FormsControls_warning__3-9Ji",redux_form:"FormsControls_redux_form__2KMqr",formButtons:"FormsControls_formButtons__2Il_5",formSummaryError:"FormsControls_formSummaryError__M0EwL",header:"FormsControls_header__23ev9",wholeForm:"FormsControls_wholeForm__2BeEg",operationContainer:"FormsControls_operationContainer__3DNz2",operationHeader:"FormsControls_operationHeader__1NgkQ"}},28:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return h}));var r=function(e){if(!e)return"Field is required"},c=function(e){return function(t){return t&&t.length>e?"Value must be less or equal to ".concat(e," symbols"):void 0}},a=function(e){return function(t){return t&&t.length<e?"Value must be more or equal to ".concat(e," symbols"):void 0}},i=a(20),o=c(60),s=function(e){if(void 0!==i(e)||void 0!==o(e))return"M\u0438\u043d\u0438\u043c\u0443\u043c 20, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 60 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},u=c(200),d=function(e){var t=+e;if(t.toFixed(2)==t){if(0<=t&&t<=99999999.99)return}return"\u0426\u0435\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0441 2 \u0447\u0438\u0441\u043b\u0430\u043c\u0438 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439: '0.00'. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: '99999999.99'"},l=a(10),j=c(90),b=function(e){if(void 0!==e){var t=+e;return Number.isInteger(t)?void 0===l(t)&&void 0===j(t)?void 0:"\u0427\u0438\u0441\u043b\u043e \u043d\u0435 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 10-90 %":"\u0427\u0438\u0441\u043b\u043e \u043d\u0435 \u0446\u0435\u043b\u043e\u0435"}},p=function(e){if(void 0!==e&&!(Date.parse(e)>+new Date))return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0441\u043a\u0438\u0434\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0434\u0430\u0442\u044b"},h=function(e){var t={};return e.discount?e.discountEndTime||(t.discountEndTime="Required"):e.discountEndTime&&(e.discount||(t.discount="Required")),t}},282:function(e,t,n){},39:function(e,t,n){e.exports={nav:"Navbar_nav__12XVe",item:"Navbar_item__24jqm",activeLink:"Navbar_activeLink__2-6Px"}},407:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),a=n.n(c),i=n(54),o=n.n(i),s=(n(282),n(19)),u=n(24),d=n(17),l=n(11),j=n(15),b=n.n(j),p=n(23),h=n(75),f=n(37),m="SET_USER_DATA",O={userId:null,email:null,isAuth:!1},v=function(e,t,n){return{type:m,payload:{userId:e,email:t,isAuth:n}}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),t.payload);default:return Object(l.a)({},e)}},x="INITIALIZED_SUCCESS",_={initialized:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),{},{initialized:!0});default:return Object(l.a)({},e)}};function w(e){return function(t){return Object(r.jsx)(a.a.Suspense,{fallback:Object(r.jsx)("div",{children:"loading..."}),children:Object(r.jsx)(e,Object(l.a)({},t))})}}var k=n(86),C=n(138),P=n(185),F=n(186),N=n(18),E=n(28),S=n(115),I=n(27),A=n.n(I),D=n(194),T=n.n(D),L=n(136),H=n(195),U=Object(F.a)({form:"updateProduct",validate:E.g})((function(e){var t=Object(c.useState)(Object.values(e.product).reduce((function(e,t){return e[t]=!1,e}),{})),n=Object(P.a)(t,2),a=n[0],i=n[1],o=e.handleSubmit,s=e.pristine,u=e.reset,d=e.submitting,j=e.error,b=e.product,p=function(e){i(Object(l.a)(Object(l.a)({},a),{},Object(C.a)({},e,!0)))};return Object(r.jsxs)("form",{onSubmit:o,children:[Object(r.jsx)("div",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),a.name?Object(N.d)("".concat(b.name),"name",N.c,[E.f,E.c]):Object(r.jsx)("div",{id:"name",onDoubleClick:function(){return p("name")},children:b.name}),Object(r.jsx)("div",{className:T.a.imgMiddleContainer,children:Object(r.jsx)("img",{src:b.photo,alt:"Data"})}),Object(r.jsx)("div",{children:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),a.photo?Object(N.d)("".concat(b.photo),"photo",N.c,[E.f]):Object(r.jsx)("div",{onDoubleClick:function(){return p("photo")},children:b.photo}),Object(r.jsx)("div",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),a.description?Object(N.d)("".concat(b.description||"..."),"description",N.c,[E.e]):Object(r.jsx)("div",{onDoubleClick:function(){return p("description")},children:b.description||"..."}),Object(r.jsx)("div",{children:"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),a.price?Object(N.d)("".concat(b.price),"price",N.c,[E.f,E.d]):Object(r.jsx)("div",{onDoubleClick:function(){return p("price")},children:b.price}),Object(r.jsx)("div",{children:"\u0421\u043a\u0438\u0434\u043a\u0430"}),a.discount?Object(N.d)("".concat(b.discount||"..."),"discount",N.c,[E.f,E.a]):Object(r.jsx)("div",{onDoubleClick:function(){return p("discount")},children:b.discount||"..."}),Object(r.jsx)("div",{children:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0430\u043a\u0446\u0438\u0438"}),a.discountEndTime?Object(N.d)("".concat(b.discountEndTime||"..."),"discountEndTime",N.c,[E.f,E.b]):Object(r.jsx)("div",{onDoubleClick:function(){return p("discountEndTime")},children:b.discountEndTime||"..."}),j&&Object(r.jsx)("div",{className:A.a.formSummaryError,children:j}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:s||d,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:s||d,onClick:u,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),R=Object(d.d)(H.a,Object(u.b)((function(e){return{isFetching:e.products.isFetching,currentProduct:e.products.selectedProduct}}),{getProduct:S.d,updateProduct:S.g}),s.f)((function(e){var t=e.updateProduct,n=e.getProduct,a=e.currentProduct,i=(e.isFetching,Object(k.a)(e,["updateProduct","getProduct","currentProduct","isFetching"])),o=Object(c.useState)(!1),s=Object(P.a)(o,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){u||function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.match.params.productKey){e.next=5;break}i.history.push("/catalog"),e.next=8;break;case 5:return e.next=7,n(t);case 7:d(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i.match.params.key,n,i.history,u]),u?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"",children:[Object(r.jsx)("h1",{children:"updateProduct"}),Object(r.jsx)(U,{onSubmit:function(e){var n=Object(l.a)(Object(l.a)({},a),e);console.log(a),t(a.key,n)},product:a})]})}):Object(r.jsx)(L.a,{})})),q=Object(F.a)({form:"signin"})((function(e){var t=e.handleSubmit,n=e.pristine,c=e.reset,a=e.submitting,i=e.error;return Object(r.jsxs)("form",{onSubmit:t,className:A.a.wholeForm,children:[Object(N.d)("Email","email",N.c,[E.f]),Object(N.d)("Password","password",N.c,[E.f],{type:"password"}),i&&Object(r.jsx)("div",{className:A.a.formSummaryError,children:i}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:n||a,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:n||a,onClick:c,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),z=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),{signin:function(e,t){return function(){var n=Object(p.a)(b.a.mark((function n(r){var c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.auth().signInWithEmailAndPassword(e,t);case 3:c=n.sent,r(v(c.user.uid,e,!0)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0.message),r(Object(f.b)("signin",{_error:n.t0.message}));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(s.a,{to:"/catalog"}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:A.a.operationContainer,children:[Object(r.jsx)("h1",{className:A.a.operationHeader,children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(r.jsx)(q,{onSubmit:function(t){e.signin(t.email,t.password)}})]})})})),B=Object(F.a)({form:"signup"})((function(e){var t=e.handleSubmit,n=e.pristine,c=e.reset,a=e.submitting,i=e.error;return Object(r.jsxs)("form",{onSubmit:t,className:A.a.wholeForm,children:[Object(N.d)("Email","email",N.c,[E.f]),Object(N.d)("Password","password",N.c,[E.f],{type:"password"}),i&&Object(r.jsx)("div",{className:A.a.formSummaryError,children:i}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:n||a,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:n||a,onClick:c,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),K=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),{signup:function(e,t){return function(){var n=Object(p.a)(b.a.mark((function n(r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.auth().createUserWithEmailAndPassword(e,t);case 3:n.next=9;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0.message),r(Object(f.b)("signup",{_error:n.t0.message}));case 9:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:A.a.operationContainer,children:[Object(r.jsx)("h1",{className:A.a.operationHeader,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(r.jsx)(B,{onSubmit:function(t){e.signup(t.email,t.password)}})]})})})),M=n(60),W=n(61),V=n(103),G=n(101),J=n(167),Z=n.n(J),X=n(33),Q=function(e){return Object(r.jsx)("header",{className:Z.a.header,children:e.isAuth?Object(r.jsxs)("div",{className:Z.a.loginBlock,children:[e.email," - ",Object(r.jsx)("a",{onClick:e.signout,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(r.jsx)("div",{className:Z.a.loginBlock,children:Object(r.jsx)(X.b,{to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})})})},Y=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Q,Object(l.a)({},this.props))}}]),n}(a.a.Component),$=Object(u.b)((function(e){return{email:e.auth.email,isAuth:e.auth.isAuth}}),{signout:function(){return function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.auth().signOut();case 3:t(v(null,null,!1)),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message),t(Object(f.b)("sigput",{_error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})(Y),ee=n(39),te=n.n(ee),ne=function(){return Object(r.jsxs)("nav",{className:te.a.nav,children:[Object(r.jsx)("div",{className:te.a.item,children:Object(r.jsx)(X.b,{to:"/catalog",activeClassName:te.a.activeLink,children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})}),Object(r.jsx)("div",{className:"".concat(te.a.item," ").concat(te.a.active),children:Object(r.jsx)(X.b,{to:"/add_product",activeClassName:te.a.activeLink,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}),Object(r.jsx)("div",{className:"".concat(te.a.item," ").concat(te.a.active),children:Object(r.jsx)(X.b,{to:"/signin",activeClassName:te.a.activeLink,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(r.jsx)("div",{className:"".concat(te.a.item," ").concat(te.a.active),children:Object(r.jsx)(X.b,{to:"/signup",activeClassName:te.a.activeLink,children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f"})})]})},re=a.a.lazy((function(){return n.e(4).then(n.bind(null,426))})),ce=a.a.lazy((function(){return n.e(3).then(n.bind(null,424))})),ae=w(re),ie=w(ce),oe=a.a.memo((function(e){return Object(c.useEffect)((function(){e.initializeApp()}),[e.initializeApp]),e.initialized?(console.log("here"),Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)($,{}),Object(r.jsx)(ne,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(s.b,{exact:!0,path:["/catalog","/"],render:function(){return Object(r.jsx)(ae,{})}}),Object(r.jsx)(s.b,{path:"/add_product",render:function(){return Object(r.jsx)(ie,{})}}),Object(r.jsx)(s.b,{exact:!0,path:"/catalog/:productKey",render:function(){return Object(r.jsx)(R,{})}}),Object(r.jsx)(s.b,{path:"/signin",render:function(){return Object(r.jsx)(z,{})}}),Object(r.jsx)(s.b,{path:"/signup",render:function(){return Object(r.jsx)(K,{})}})]})]})):Object(r.jsx)(L.a,{})})),se=Object(d.d)(s.f,Object(u.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){h.a.auth().onAuthStateChanged((function(n){if(n)return e(t(v(n.uid,n.email,!0))),!0;console.log("no login"),e(t(v(null,null,!1)))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e({type:x})}))}}}))(oe),ue=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,425)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},de=n(225),le=n(237),je=Object(d.c)({form:de.a,app:y,auth:g,products:S.b}),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,pe=Object(d.e)(je,be(Object(d.a)(le.a)));window.__store__=pe;var he=pe;o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(X.a,{children:Object(r.jsx)(u.a,{store:he,children:Object(r.jsx)(se,{})})})}),document.getElementById("root")),ue()},75:function(e,t,n){"use strict";var r=n(123),c=(n(301),n(302),r.auth.Auth.Persistence.LOCAL),a=r.apps.length?r.app():r.initializeApp({apiKey:"AIzaSyB232ly-YH5BqFVivK6cZwpFCem-6F0Csk",authDomain:"testproj-30b12.firebaseapp.com",databaseURL:"https://testproj-30b12-default-rtdb.firebaseio.com",projectId:"testproj-30b12",storageBucket:"testproj-30b12.appspot.com",messagingSenderId:"288859036226",appId:"1:288859036226:web:2256619dd7e9892dac2bdb",measurementId:"G-6BVLDP7VT0"});a.auth().setPersistence(c),t.a=a}},[[407,1,2]]]);
//# sourceMappingURL=main.941fc780.chunk.js.map