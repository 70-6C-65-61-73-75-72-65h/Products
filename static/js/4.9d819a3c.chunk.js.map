{"version":3,"sources":["components/Catalog/Product.jsx","components/Catalog/Catalog.jsx"],"names":["Product","productKey","name","price","description","discount","discountEndTime","photo","deleteProduct","isDiscountActive","Date","isFetching","Preloader","className","styles","productContainer","productHeader","newPrice","console","log","toFixed","calcPrice","src","alt","empty","det","days","Math","floor","calcDET","operationBlock","to","delete","onClick","compose","withAuthRedirect","connect","state","products","getProducts","useState","firstfetched","setFetched","useEffect","a","fetch","productStyles","catalog","map","product","key"],"mappings":"wLAmEeA,EA/DC,SAAC,GAUV,IATLC,EASI,EATJA,WACAC,EAQI,EARJA,KACAC,EAOI,EAPJA,MACAC,EAMI,EANJA,YACAC,EAKI,EALJA,SACAC,EAII,EAJJA,gBACAC,EAGI,EAHJA,MACAC,EAEI,EAFJA,cAYMC,EAAmB,kBAAMH,GAAmB,IAAII,MAStD,OAnBI,EADJC,WAoBuB,cAACC,EAAA,EAAD,IAErB,sBAAKC,UAAWC,IAAOC,iBAAvB,UACE,qBAAIF,UAAWC,IAAOE,cAAtB,cAAuCd,KACvC,sFAAiBE,GAAe,SAChC,6DAbc,WAChB,IAAIa,GAAYd,EAKhB,OAJIE,IACFY,GAAuB,EAAIZ,EAAW,KAExCa,QAAQC,IAAIF,GACLA,EAASG,QAAQ,GAOVC,GAAZ,QACA,qBAAKR,UAAU,oBAAf,SACE,qBAAKS,IAAKf,EAAOgB,IAAK,oEAEvBd,IACC,sBAAKI,UAAS,UAAKC,IAAOT,UAA1B,mDAA+CA,EAA/C,QAEA,qBAAKQ,UAAS,UAAKC,IAAOT,SAAZ,YAAwBS,IAAOU,SAE9Cf,IACC,sBAAKI,UAAS,UAAKC,IAAOT,UAA1B,yFAjCU,SAACoB,GACf,IAAIC,EAAOC,KAAKC,OAAOH,EAAM,IAAIf,MAAU,IAAO,GAAK,GAAK,IAC5D,MACQ,GAAN,OAAUgB,GADPA,EAAO,GAAK,KAAO,IAAQA,EAAO,IAAM,MAAQ,EACnD,kCAEA,mCA6BqBG,CAAQvB,MAG3B,qBAAKO,UAAS,UAAKC,IAAOT,SAAZ,YAAwBS,IAAOU,SAE/C,sBAAKX,UAAWC,IAAOgB,eAAvB,UACE,8BACE,cAAC,IAAD,CAASC,GAAI,YAAc9B,EAA3B,8FAEF,qBAAKY,UAAWC,IAAOkB,OAAvB,SACE,cAAC,IAAD,CAASD,GAAI,YAAaE,QAAS,kBAAMzB,EAAcP,IAAvD,iE,gCCJKiC,sBACbC,IACAC,aAPsB,SAACC,GAAD,MAAY,CAClCC,SAAUD,EAAMC,SAASA,SACzB3B,WAAY0B,EAAMC,SAAS3B,cAKF,CAAEH,kBAAe+B,kBAF7BL,EA7CU,SAAC,GAKnB,IAJLK,EAII,EAJJA,YACAD,EAGI,EAHJA,SACA9B,EAEI,EAFJA,cACAG,EACI,EADJA,WACI,EAC+B6B,oBAAS,GADxC,mBACGC,EADH,KACiBC,EADjB,KAWJ,OATAC,qBAAU,WAKHF,GAJM,uCAAG,sBAAAG,EAAA,6DACZF,GAAW,GADC,SAENH,IAFM,2CAAH,oDAKTM,KAED,CAACJ,EAAcC,EAAYH,IAC1B5B,EAAmB,cAACC,EAAA,EAAD,IAGrB,8BACE,qBAAKC,UAAWiC,IAAcC,QAA9B,SACGT,EAASU,KAAI,SAACC,GAAD,OACZ,cAAC,EAAD,CAEEhD,WAAYgD,EAAQC,IACpBhD,KAAM+C,EAAQ/C,KACdE,YAAa6C,EAAQ7C,YACrBD,MAAO8C,EAAQ9C,MACfE,SAAU4C,EAAQ5C,SAClBC,gBAAiB2C,EAAQ3C,gBACzBC,MAAO0C,EAAQ1C,MACfC,cAAeA,EACfG,WAAYA,GATPsC,EAAQC","file":"static/js/4.9d819a3c.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport styles from \"./Product.module.scss\";\r\nconst Product = ({\r\n  productKey,\r\n  name,\r\n  price,\r\n  description,\r\n  discount,\r\n  discountEndTime,\r\n  photo,\r\n  deleteProduct,\r\n  isFetching,\r\n}) => {\r\n  const calcDET = (det) => {\r\n    let days = Math.floor((det - new Date()) / 1000 / 60 / 60 / 24);\r\n    if ((days - 1) % 10 === 0 && !((days - 11) % 100 === 0)) {\r\n      return `${days} сутки`;\r\n    } else {\r\n      return `${days} суток`;\r\n    }\r\n  };\r\n\r\n  const isDiscountActive = () => discountEndTime > +new Date();\r\n  const calcPrice = () => {\r\n    let newPrice = +price;\r\n    if (discount) {\r\n      newPrice = newPrice * (1 - discount / 100);\r\n    }\r\n    console.log(newPrice);\r\n    return newPrice.toFixed(2);\r\n  };\r\n  if (isFetching) return <Preloader />;\r\n  return (\r\n    <div className={styles.productContainer}>\r\n      <h3 className={styles.productHeader}> {name}</h3>\r\n      <div> Описание: {description || \"...\"}</div>\r\n      <div>Цена: {calcPrice()} $</div>\r\n      <div className=\"imgSmallContainer\">\r\n        <img src={photo} alt={\"Фото товара\"} />\r\n      </div>\r\n      {isDiscountActive() ? (\r\n        <div className={`${styles.discount}`}>Скидка: {discount} %</div>\r\n      ) : (\r\n        <div className={`${styles.discount} ${styles.empty}`}></div>\r\n      )}\r\n      {isDiscountActive() ? (\r\n        <div className={`${styles.discount}`}>\r\n          До конца акции: {calcDET(discountEndTime)}\r\n        </div>\r\n      ) : (\r\n        <div className={`${styles.discount} ${styles.empty}`}></div>\r\n      )}\r\n      <div className={styles.operationBlock}>\r\n        <div>\r\n          <NavLink to={\"/catalog/\" + productKey}>Редактировать</NavLink>\r\n        </div>\r\n        <div className={styles.delete}>\r\n          <NavLink to={\"/catalog/\"} onClick={() => deleteProduct(productKey)}>\r\n            Удалить\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Product;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Product from \"./Product\";\r\nimport { deleteProduct, getProducts } from \"../../redux/product-reducer\";\r\nimport { connect } from \"react-redux\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport withAuthRedirect from \"../HOCS/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\nimport productStyles from \"./Product.module.scss\";\r\n\r\nconst CatalogContainer = ({\r\n  getProducts,\r\n  products,\r\n  deleteProduct,\r\n  isFetching,\r\n}) => {\r\n  const [firstfetched, setFetched] = useState(false);\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      setFetched(true);\r\n      await getProducts();\r\n    };\r\n    if (!firstfetched) {\r\n      fetch();\r\n    }\r\n  }, [firstfetched, setFetched, getProducts]);\r\n  if (isFetching) return <Preloader />;\r\n\r\n  return (\r\n    <div>\r\n      <div className={productStyles.catalog}>\r\n        {products.map((product) => (\r\n          <Product\r\n            key={product.key}\r\n            productKey={product.key}\r\n            name={product.name}\r\n            description={product.description}\r\n            price={product.price}\r\n            discount={product.discount}\r\n            discountEndTime={product.discountEndTime}\r\n            photo={product.photo}\r\n            deleteProduct={deleteProduct}\r\n            isFetching={isFetching}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.products.products,\r\n  isFetching: state.products.isFetching,\r\n});\r\n\r\nexport default compose(\r\n  withAuthRedirect,\r\n  connect(mapStateToProps, { deleteProduct, getProducts })\r\n)(CatalogContainer);\r\n"],"sourceRoot":""}