(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{129:function(e,t,n){e.exports={container:"Preloader_container__1VGeq"}},13:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2ZNMf",error:"FormsControls_error__3FPkv",warning:"FormsControls_warning__3-9Ji",redux_form:"FormsControls_redux_form__2KMqr",formButtons:"FormsControls_formButtons__2Il_5",formSummaryError:"FormsControls_formSummaryError__M0EwL",header:"FormsControls_header__23ev9",wholeForm:"FormsControls_wholeForm__2BeEg",fieldDescr:"FormsControls_fieldDescr__iQyBt",operationContainer:"FormsControls_operationContainer__3DNz2",operationHeader:"FormsControls_operationHeader__1NgkQ",imgContainer:"FormsControls_imgContainer__yj_cs",uploadIcon:"FormsControls_uploadIcon__1W7OA"}},16:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(3),c=n(45),a=n(1),i=n(0),o=n(13),u=n.n(o),s=n(119),d=n.p+"static/media/Upload-icon.0ffb4073.png",l=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,c=t.warning,i=e.children,o=n&&r,s=n&&c;return Object(a.jsxs)("div",{className:u.a.formControl+" "+(o?u.a.error:"")+" "+(s?u.a.warning:""),children:[i,o&&Object(a.jsx)("span",{children:r})||s&&Object(a.jsx)("span",{children:c})]})},b=function(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,["input","meta","child"]));return Object(a.jsx)(l,Object(r.a)(Object(r.a)({},e),{},{children:Object(a.jsx)("textarea",Object(r.a)(Object(r.a)(Object(r.a)({},t),n),{},{ref:e.refa}))}))};function j(e){var t=e.input,n=(e.meta,e.child,Object(c.a)(e,["input","meta","child"])),i=e.input.value?n:e.lastDateValue?Object(r.a)(Object(r.a)({},n),{},{value:e.lastDateValue}):n;return Object(a.jsx)(l,Object(r.a)(Object(r.a)({},e),{},{children:Object(a.jsx)("input",Object(r.a)(Object(r.a)({},t),{},{ref:e.refa},i))}))}var p=function(e,t,n,c){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)(s.a,Object(r.a)({placeholder:e,name:t,component:n,validate:c},i)),o]})};function f(e){var t=Object.assign({},e),n=Object(i.useRef)(null),o=function(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}(t.meta.pristine);Object(i.useEffect)((function(){!1===o&&!0===t.meta.pristine&&(n.current.src="")}),[t.meta.pristine]);var s=function(e,t){e.preventDefault();var r,c=e.target.files[0];if(c){var a=URL.createObjectURL(c),i=new window.Image;i.onload=function(){c.width=i.naturalWidth,c.height=i.naturalHeight,t.onChange(c),URL.revokeObjectURL(c)},i.src=a,r=a,n.current.src=r}e.currentTarget.value=null},b=t.input,j=(t.meta,t.child,Object(c.a)(t,["input","meta","child"]));return Object(a.jsxs)(l,Object(r.a)(Object(r.a)({},t),{},{children:[Object(a.jsx)("div",{className:u.a.imgContainer,children:Object(a.jsx)("img",{src:"",alt:t.alt,className:"preview-image",ref:n})}),Object(a.jsx)("label",{for:"thatImage",className:u.a.uploadIcon,children:Object(a.jsx)("img",{src:d,style:{width:"100px",height:"100px"},alt:"nothing"})}),Object(a.jsx)("input",Object(r.a)({id:"thatImage",name:b.name,style:{opacity:0,height:"0px"},type:"file",accept:t.mimeType,onChange:function(e){return s(e,b)}},j))]}))}},177:function(e,t,n){},178:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return j})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return O})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return x}));var r,c,a,i,o,u,s=function(e){if(!e)return"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"},d=function(e){return function(t){return t&&t.length>e?"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 ".concat(e," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):void 0}},l=(r=20,function(e){return e&&e.length<r?"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(r," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):void 0}),b=d(60),j=function(e){if(void 0!==l(e)||void 0!==b(e))return"M\u0438\u043d\u0438\u043c\u0443\u043c 20, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 60 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},p=d(200),f=function(e){if(void 0!==e){var t=+e;if(t.toFixed(2)==t){if(0<=t&&t<=99999999.99)return}return"\u0426\u0435\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0441 2 \u0447\u0438\u0441\u043b\u0430\u043c\u0438 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439: '0.00'. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: '99999999.99'"}},h=function(e){if(void 0!==e){var t=+e;return Number.isInteger(t)?10<=t&&t<=90?void 0:"\u0427\u0438\u0441\u043b\u043e \u043d\u0435 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 10-90 %":"\u0427\u0438\u0441\u043b\u043e \u043d\u0435 \u0446\u0435\u043b\u043e\u0435"}},m=function(e){if(void 0!==e&&!(Date.parse(e)>+new Date))return"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0441\u043a\u0438\u0434\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0434\u0430\u0442\u044b"},O=function(e){var t={};return e.discount?e.discountEndTime||(t.discountEndTime="Required"):e.discountEndTime&&(e.discount||(t.discount="Required")),t},v=(c=200,a=4e3,function(e){if(e&&(e.width>a||e.width<c))return"\u0428\u0438\u0440\u0438\u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(c,"px  \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 ").concat(a,"px")}),g=(i=200,o=4e3,function(e){if(e&&(e.height>o||e.height<i))return"\u0412\u044b\u0441\u043e\u0442\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(i,"px \u0438 \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 ").concat(o,"px")}),x=(u="image/jpeg, image/png",function(e){if(e&&!u.includes(e.type))return"\u0422\u0438\u043f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0434\u043d\u0438\u043c \u0438\u0437: ".concat(u)})},23:function(e,t,n){e.exports={nav:"Navbar_nav__12XVe",navMenu:"Navbar_navMenu__2v3_m",item:"Navbar_item__24jqm",activeLink:"Navbar_activeLink__2-6Px"}},300:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),i=n(67),o=n.n(i),u=(n(177),n(12)),s=(n(178),n(14)),d=n(11),l=n(3),b=n(8),j=n.n(b),p=n(15),f=n(35),h=n(20),m="SET_USER_DATA",O={userId:null,email:null,isAuth:!1},v=function(e,t,n){return{type:m,payload:{userId:e,email:t,isAuth:n}}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),t.payload);default:return Object(l.a)({},e)}},x="INITIALIZED_SUCCESS",_={initialized:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),{},{initialized:!0});default:return Object(l.a)({},e)}};function w(e){return function(t){return Object(r.jsx)(a.a.Suspense,{fallback:Object(r.jsx)("div",{style:{backgroundColor:"white",textAlign:"center",fontSize:"40px"},children:"Loading..."}),children:Object(r.jsx)(e,Object(l.a)({},t))})}}var k=n(45),C=n(41),N=n(27),P=n(120),F=n(16),E=n(18),S=n(49),A=n(13),D=n.n(A),I=n(64),T=n.n(I),L=n(66),U=n(96),R=n(90),B=Object(P.a)({form:"updateProduct",validate:E.j})((function(e){var t=Object(c.useState)(Object.values(e.product).reduce((function(e,t){return e[t]=!1,e}),{})),n=Object(N.a)(t,2),a=n[0],i=n[1],o=e.handleSubmit,u=e.pristine,s=e.reset,d=e.submitting,b=e.error,j=e.product,p=function(e){i(Object(l.a)(Object(l.a)({},a),{},Object(C.a)({},e,!0)))},f=Object(c.useState)({}),h=Object(N.a)(f,2),m=h[0],O=h[1],v=Object(c.useRef)({});var g="name",x="photo",_="description",y="price",w="discount",k="discountEndTime",P=function(e){return{onBlur:function(){var t;!m[e]&&(t=e,v.current&&void 0!==v.current.value&&""!==v.current.value?(O((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},t,!0))})),v.current=void 0):i(Object(l.a)(Object(l.a)({},a),{},Object(C.a)({},t,!1))))},onFocus:function(){p(e)},autoFocus:!0,refa:v}},S=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5?arguments[5]:void 0;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:D.a.fieldDescr,children:t}),o||a[e]?Object(F.d)("".concat(j[e]||"..."),e,n,c,Object(l.a)(Object(l.a)({},i),P(e))):Object(r.jsx)("div",{className:T.a.hotUpdate,id:e,onClick:function(){return p(e)},children:j[e]||"..."})]})},A=Object(R.a)(),I=Object(R.a)(j.discountEndTime);return console.log(I),Object(r.jsxs)("form",{onSubmit:o,className:D.a.wholeForm,children:[S(g,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",F.c,[E.c]),Object(r.jsx)("div",{className:D.a.fieldDescr,children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0444\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0430"}),Object(r.jsx)("div",{className:"imgMiddleContainer",children:Object(r.jsx)("img",{src:j.photo,alt:"Data"})}),S(x,"\u041d\u043e\u0432\u043e\u0435 \u0444\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0430",F.a,[E.e,E.g,E.f],{mimeType:"image/jpeg, image/png",maxWidth:4e3,minHeight:200,minWidth:200,maxHeight:4e3,alt:"\u0424\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0430"},!0),S(_,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",F.c,[E.h]),S(y,"\u0426\u0435\u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0430",F.b,[E.d]),S(w,"\u0421\u043a\u0438\u0434\u043a\u0430",F.b,[E.a]),S(k,"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0430\u043a\u0446\u0438\u0438",F.b,[E.b],{type:"date",min:A,lastDateValue:I},!0),b&&Object(r.jsx)("div",{className:D.a.formSummaryError,children:b}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:u||d,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:u||d,onClick:s,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),H=Object(d.d)(U.a,Object(s.b)((function(e){return{isFetching:e.products.isFetching,currentProduct:e.products.selectedProduct}}),{getProduct:S.d,updateProduct:S.g}),u.f)((function(e){var t=e.updateProduct,n=e.getProduct,a=e.currentProduct,i=e.isFetching,o=Object(k.a)(e,["updateProduct","getProduct","currentProduct","isFetching"]),u=Object(c.useState)(!1),s=Object(N.a)(u,2),d=s[0],b=s[1],f=Object(c.useRef)();Object(c.useEffect)((function(){f.current&&o.history.push("/catalog")}),[i]);var h=function(){var e=Object(p.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.discountEndTime&&(n.discountEndTime=Date.parse(n.discountEndTime)),n.photo&&(n=Object(l.a)(Object(l.a)({},n),{},{newPhoto:!0})),r=Object(l.a)(Object(l.a)({},a),n),console.log(a),e.next=6,t(a.key,r);case 6:f.current=!0;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){d||function(){var e=Object(p.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.match.params.productKey){e.next=5;break}o.history.push("/catalog"),e.next=8;break;case 5:return e.next=7,n(t);case 7:b(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o.match.params.key,n,o.history,d]),d?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:T.a.productOperationContainer,children:[Object(r.jsx)("h1",{className:T.a.productOperationHeader,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),Object(r.jsx)(B,{onSubmit:h,product:a})]})}):Object(r.jsx)(L.a,{})})),z=Object(P.a)({form:"signin"})((function(e){var t=e.handleSubmit,n=e.pristine,c=e.reset,a=e.submitting,i=e.error;return Object(r.jsxs)("form",{onSubmit:t,className:D.a.wholeForm,children:[Object(F.d)("Email","email",F.b,[E.i]),Object(F.d)("Password","password",F.b,[E.i],{type:"password"}),i&&Object(r.jsx)("div",{className:D.a.formSummaryError,children:i}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:n||a,children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:n||a,onClick:c,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),M=Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}),{signin:function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.auth().signInWithEmailAndPassword(e,t);case 3:c=n.sent,r(v(c.user.uid,e,!0)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0.message),r(Object(h.b)("signin",{_error:n.t0.message}));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(u.a,{to:"/catalog"}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:D.a.operationContainer,children:[Object(r.jsx)("h1",{className:D.a.operationHeader,children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(r.jsx)(z,{onSubmit:function(t){e.signin(t.email,t.password)}})]})})})),V=Object(P.a)({form:"signup"})((function(e){var t=e.handleSubmit,n=e.pristine,c=e.reset,a=e.submitting,i=e.error;return Object(r.jsxs)("form",{onSubmit:t,className:D.a.wholeForm,children:[Object(F.d)("Email","email",F.b,[E.i]),Object(F.d)("Password","password",F.b,[E.i],{type:"password"}),i&&Object(r.jsx)("div",{className:D.a.formSummaryError,children:i}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"submit",disabled:n||a,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("button",{type:"button",disabled:n||a,onClick:c,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"})})]})})),K=Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}),{signup:function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.auth().createUserWithEmailAndPassword(e,t);case 3:n.next=9;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0.message),r(Object(h.b)("signup",{_error:n.t0.message}));case 9:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:D.a.operationContainer,children:[Object(r.jsx)("h1",{className:D.a.operationHeader,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(r.jsx)(V,{onSubmit:function(t){e.signup(t.email,t.password)}})]})})})),q=n(73),G=n.n(q),J=Object(s.b)((function(e){return{email:e.auth.email,isAuth:e.auth.isAuth}}),null)((function(e){return Object(r.jsx)("header",{className:G.a.header,children:e.isAuth?Object(r.jsx)("div",{className:G.a.loginBlock,children:e.email}):Object(r.jsx)("div",{className:G.a.loginBlock,children:"\u0410\u043d\u043e\u043d\u0438\u043c"})})})),W=n(23),X=n.n(W),Z=n(25),Q=n(132),Y=Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}),{signout:function(){return function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.auth().signOut();case 3:t(v(null,null,!1)),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message),t(Object(h.b)("sigput",{_error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=Object(c.useState)(!1),n=Object(N.a)(t,2),a=n[0],i=n[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("nav",{className:X.a.nav,children:[Object(r.jsx)("div",{className:X.a.humb,children:Object(r.jsx)(Q.a,{toggled:a,toggle:i,color:"red",size:100})}),a&&Object(r.jsxs)("nav",{className:X.a.navMenu,onBlur:function(){return i((function(e){return!e}))},children:[Object(r.jsx)("div",{className:X.a.item,children:Object(r.jsx)(Z.b,{to:"/catalog",activeClassName:X.a.activeLink,children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})}),Object(r.jsx)("div",{className:"".concat(X.a.item," "),children:Object(r.jsx)(Z.b,{to:"/add_product",activeClassName:X.a.activeLink,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}),Object(r.jsx)("div",{className:"".concat(X.a.item," "),children:Object(r.jsx)(Z.b,{to:"/signup",activeClassName:X.a.activeLink,children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u0441\u044f"})}),Object(r.jsx)("div",{className:"".concat(X.a.item,"  "),children:Object(r.jsx)(Z.b,{to:"/signin",activeClassName:X.a.activeLink,children:"\u0412\u043e\u0439\u0442\u0438"})}),e.isAuth&&Object(r.jsx)("div",{className:"".concat(X.a.item,"  "),children:Object(r.jsx)("a",{onClick:e.signout,children:"\u0412\u044b\u0439\u0442\u0438"})})]})]})})})),$=a.a.lazy((function(){return n.e(4).then(n.bind(null,304))})),ee=a.a.lazy((function(){return n.e(3).then(n.bind(null,302))})),te=w($),ne=w(ee),re=a.a.memo((function(e){return Object(c.useEffect)((function(){e.initializeApp()}),[e.initializeApp]),e.initialized?(console.log("here"),Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(J,{}),Object(r.jsx)(Y,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(u.b,{exact:!0,path:["/catalog","/"],render:function(){return Object(r.jsx)(te,{})}}),Object(r.jsx)(u.b,{path:"/add_product",render:function(){return Object(r.jsx)(ne,{})}}),Object(r.jsx)(u.b,{exact:!0,path:"/catalog/:productKey",render:function(){return Object(r.jsx)(H,{})}}),Object(r.jsx)(u.b,{path:"/signin",render:function(){return Object(r.jsx)(M,{})}}),Object(r.jsx)(u.b,{path:"/signup",render:function(){return Object(r.jsx)(K,{})}})]})]})):Object(r.jsx)(L.a,{})})),ce=Object(d.d)(u.f,Object(s.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){f.a.auth().onAuthStateChanged((function(n){if(n)return e(t(v(n.uid,n.email,!0))),!0;console.log("no login"),e(t(v(null,null,!1)))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e({type:x})}))}}}))(re),ae=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,303)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},ie=n(121),oe=n(130),ue=Object(d.c)({form:ie.a,app:y,auth:g,products:S.b}),se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,de=Object(d.e)(ue,se(Object(d.a)(oe.a)));window.__store__=de;var le=de;o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Z.a,{children:Object(r.jsx)(s.a,{store:le,children:Object(r.jsx)(ce,{})})})}),document.getElementById("root")),ae()},35:function(e,t,n){"use strict";var r=n(55),c=(n(197),n(198),r.auth.Auth.Persistence.LOCAL),a=r.apps.length?r.app():r.initializeApp({apiKey:"AIzaSyB232ly-YH5BqFVivK6cZwpFCem-6F0Csk",authDomain:"testproj-30b12.firebaseapp.com",databaseURL:"https://testproj-30b12-default-rtdb.firebaseio.com",projectId:"testproj-30b12",storageBucket:"testproj-30b12.appspot.com",messagingSenderId:"288859036226",appId:"1:288859036226:web:2256619dd7e9892dac2bdb",measurementId:"G-6BVLDP7VT0"});a.auth().setPersistence(c),t.a=a},49:function(e,t,n){"use strict";n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return F})),n.d(t,"a",(function(){return E})),n.d(t,"g",(function(){return S}));var r=n(27),c=n(8),a=n.n(c),i=n(15),o=n(3),u=n(70),s=n(71),d=n(35),l=d.a.database().ref("/products"),b=d.a.storage().ref("/images"),j=new(function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"isFileExists",value:function(e){return new Promise((function(t){b.child(e).getDownloadURL().then((function(e){console.log("File exists"),t(!0)})).catch((function(){console.log("File doesn't exist"),t(!1)}))}))}},{key:"removeFile",value:function(e){b.child(e).delete().then((function(){console.log("File deleted successfully")})).catch((function(e){console.log(e),console.log("Uh-oh, an error occurred!")}))}},{key:"loadFile",value:function(e,t){return new Promise((function(n){b.child(t).put(e).then(function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Uploaded a blob or file!"),console.log(t.metadata),e.next=4,new Promise((function(e){b.child(t.metadata.name).getDownloadURL().then((function(n){e([n,t.metadata.name])}))}));case 4:r=e.sent,n(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},{key:"getAll",value:function(){return l}},{key:"get",value:function(e){return l.child(e)}},{key:"create",value:function(e){return l.push(e)}},{key:"update",value:function(e,t){return l.child(e).update(t)}},{key:"delete",value:function(e){return l.child(e).remove()}},{key:"deleteAll",value:function(){return l.remove()}}]),e}()),p=n(20),f="TOGGLE_IS_FETCHING",h="SET_PRODUCTS",m="SELECT_PRODUCT",O="UPDATE_PRODUCT",v="DELETE_PRODUCT",g="SET_LOADED_IMAGE_LINK",x={products:[],isFetching:!0,selectedProduct:null,loadedImageLink:null},_=function(e){return{type:f,isFetching:e}},y=function(e){return{type:h,products:e}},w=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.isFileExists(t.name);case 2:return n=e.sent,r=t.name,n&&(c=+new Date,r="".concat(c,"-").concat(r)),e.next=7,Promise.all([j.loadFile(t,r)]);case 7:return i=e.sent,e.abrupt("return",i[0]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){return function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_(!0)),e.prev=1,e.next=4,j.getAll().once("value",(function(e){var n=[],r=e.val();for(var c in r){console.log(c);var a=c,i=r[c];n.push({key:a,photo:i.photo,localPhoto:i.localPhoto,description:i.description,name:i.name,price:i.price,discount:i.discount,discountEndTime:i.discountEndTime})}n.reverse(),t(y(n))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0.message),console.log(e.t0.code);case 10:t(_(!1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e,t){return{type:O,productKey:e,newData:t}},N=function(e){return{type:v,productKey:e}},P=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0)),t.prev=1,t.next=4,j.get(e).once("value",function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.val(),e.next=3,j.removeFile(n.localPhoto);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return t.next=6,j.delete(e);case 6:n(N(e)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code);case 13:n(_(!1));case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0)),t.prev=1,t.next=4,j.get(e).once("value",(function(t){var r;n((r=Object(o.a)(Object(o.a)({},t.val()),{},{key:e}),{type:m,product:r})),n(_(!1))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code),n(_(!1));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){var c,i,u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0)),t.prev=1,t.next=4,w(e.photo);case 4:return c=t.sent,i=Object(r.a)(c,2),u=i[0],s=i[1],t.next=10,j.create(Object(o.a)(Object(o.a)({},e),{},{photo:u,localPhoto:s}));case 10:n(Object(p.a)("addProduct")),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0.message),console.log(t.t0.code),n(Object(p.b)("addProduct",{_error:t.t0.message}));case 18:n(_(!1));case 19:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e,t){return function(){var n=Object(i.a)(a.a.mark((function n(c){var i,u,s,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c(_(!0)),n.prev=1,!t.newPhoto){n.next=12;break}return n.next=5,w(t.photo);case 5:s=n.sent,d=Object(r.a)(s,2),i=d[0],u=d[1],t.newPhoto=void 0,t.photo=i,t.photo=u;case 12:return n.next=14,j.update(e,Object(o.a)({},t));case 14:c(C(e,t)),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(1),console.log(n.t0.message),console.log(n.t0.code),c(Object(p.b)("updateProduct",{_error:n.t0.message}));case 22:c(_(!1));case 23:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(o.a)(Object(o.a)({},e),{},{products:t.products});case m:return Object(o.a)(Object(o.a)({},e),{},{selectedProduct:t.product});case g:return Object(o.a)(Object(o.a)({},e),{},{loadedImageLink:t.link});case O:return Object(o.a)(Object(o.a)({},e),{},{products:e.products.map((function(e){return e.key===t.productKey?e=t.newData:e}))});case v:return Object(o.a)(Object(o.a)({},e),{},{products:e.products.filter((function(e){return e.key!==t.productKey}))});case f:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});default:return Object(o.a)({},e)}}},64:function(e,t,n){e.exports={productOperationContainer:"Product_productOperationContainer__2CSib",productContainer:"Product_productContainer__3MSFE",hotUpdate:"Product_hotUpdate__3MCCN",discount:"Product_discount__184h9",empty:"Product_empty__2y2V-",productHeader:"Product_productHeader__H-xzy",imgSmallContainer:"Product_imgSmallContainer__JX_R7",operationBlock:"Product_operationBlock__2SfVL",delete:"Product_delete__1NFzJ",productOperationHeader:"Product_productOperationHeader__2BJsy",productAdded:"Product_productAdded__3IIyZ",catalog:"Product_catalog__3f8H9"}},66:function(e,t,n){"use strict";var r=n(1),c=(n(0),n.p+"static/media/preloader1.81da48ab.gif"),a=n(129),i=n.n(a);t.a=function(e){return Object(r.jsx)("div",{className:i.a.container,children:Object(r.jsx)("img",{src:c})})}},73:function(e,t,n){e.exports={header:"Header_header__3FgV1",loginBlock:"Header_loginBlock__3Vg1n"}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if("number"===typeof e)e=new Date(e);else if(void 0===e)e=new Date;else if(!(e instanceof Date))return e;return"".concat(e.getYear()+1900,"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())}},96:function(e,t,n){"use strict";var r=n(3),c=n(70),a=n(71),i=n(133),o=n(131),u=n(1),s=n(0),d=n.n(s),l=n(14),b=n(12),j=function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}};t.a=function(e){var t=function(t){Object(i.a)(s,t);var n=Object(o.a)(s);function s(){return Object(c.a)(this,s),n.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(u.jsx)(e,Object(r.a)({},this.props)):Object(u.jsx)(b.a,{to:"/signin"})}}]),s}(d.a.Component);return Object(l.b)(j)(t)}}},[[300,1,2]]]);
//# sourceMappingURL=main.1c9d35ff.chunk.js.map