{"version":3,"sources":["components/FormsControls/FormsControls.module.scss","components/Preloader/Preloader.module.scss","assets/images/Upload-icon.png","components/FormsControls/FormsControls.jsx","components/FormsControls/validators.js","redux/auth-reducer.js","redux/app-reducer.js","components/HOCS/withSuspense.jsx","components/Catalog/UpdateProduct.jsx","components/Auth/SignIn/SignIn.jsx","components/Auth/SignUp/SignUp.jsx","components/Header/Header.jsx","components/Navbar/Navbar.jsx","App.jsx","reportWebVitals.js","redux/redux-store.js","index.js","components/Navbar/Navbar.module.scss","firebase-service/firebase.js","components/Catalog/Product.module.scss","firebase-service/product-service.js","redux/product-reducer.js","assets/images/preloader1.gif","components/Preloader/Preloader.js","components/Header/Header.module.scss","utils/utils.js","components/HOCS/withAuthRedirect.jsx"],"names":["module","exports","FormControl","input","meta","touched","error","warning","children","hasError","hasWarn","className","styles","formControl","TextArea","props","restProps","child","ref","refa","Input","newRP","value","lastDateValue","createField","placeholder","name","component","validators","text","Field","validate","ImageField","previewRef","useRef","prevValue","useEffect","current","usePrevious","pristine","src","handleChange","event","preventDefault","imageUrl","imageFile","target","files","localImageUrl","URL","createObjectURL","imageObject","window","Image","onload","width","naturalWidth","height","naturalHeight","onChange","revokeObjectURL","currentTarget","imgContainer","alt","for","uploadIcon","style","id","opacity","type","accept","mimeType","min","minWidth","maxWidth","minHeight","maxHeight","requiredField","maxLength","max","length","minLength20","maxLength60","acceptableName","maxLength200","acceptablePrice","val","toFixed","acceptableDiscount","Number","isInteger","acceptableDiscountEndDate","Date","parse","values","errors","discount","discountEndTime","imageWidth_200_4000","imageHeight_200_4000","imageFormat","includes","SET_USER_DATA","initialState","userId","email","isAuth","setAuthUserData","payload","authReducer","state","action","INITIALIZED_SUCCESS","initialized","appReducer","withSuspense","WrappedComponent","Suspense","fallback","backgroundColor","textAlign","fontSize","UpdateProductReduxForm","reduxForm","form","useState","Object","product","reduce","acum","productState","setPS","handleSubmit","reset","submitting","activate","setled","setSetled","setNewProductR","fieldsNames","generOwnProps","fieldsName","onBlur","dict","onFocus","autoFocus","createProductField","fieldName","label","innerProps","specialField","productStyles","fieldDescr","hotUpdate","onClick","minDate","getStringDate","lastDate","console","log","onSubmit","wholeForm","imgMiddleContainer","photo","formSummaryError","disabled","compose","withAuthRedirect","connect","isFetching","products","currentProduct","selectedProduct","getProduct","updateProduct","withRouter","hasCP","setCP","refUpdated","history","push","formData","a","newPhoto","newProd","key","productKey","match","params","fetchProduct","productOperationContainer","productOperationHeader","Preloader","SigninReduxForm","auth","signin","password","dispatch","firebase","signInWithEmailAndPassword","response","user","uid","message","stopSubmit","_error","to","operationContainer","operationHeader","SignUpReduxForm","signup","createUserWithEmailAndPassword","Header","s","header","loginBlock","signout","HeaderContainer","this","React","Component","signOut","Navbar","nav","item","activeClassName","activeLink","Catalog","lazy","AddProduct","SuspendedCatalog","SuspendedAddProduct","App","memo","initializeApp","exact","path","render","SignIn","app","promise","Promise","resolve","onAuthStateChanged","all","then","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducers","combineReducers","formReducer","productReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","ReactDOM","StrictMode","document","getElementById","persistance","Auth","Persistence","LOCAL","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","setPersistence","db","database","storage","fileName","getDownloadURL","url","catch","fileUrl","delete","file","put","snapshot","metadata","res","update","remove","TOGGLE_IS_FETCHING","SET_PRODUCTS","SELECT_PRODUCT","UPDATE_PRODUCT","DELETE_PRODUCT","SET_LOADED_IMAGE_LINK","loadedImageLink","toggleIsFetching","setProducts","loadImage","ProductDataService","isFileExists","imageExists","timestamp","loadFile","link","getProducts","getAll","once","snap","items","data","localPhoto","description","price","reverse","code","uProduct","newData","dProduct","deleteProduct","get","removeFile","addProduct","create","map","filter","container","preloader","date","getYear","getMonth","getDate","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.a936ae74.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2ZNMf\",\"error\":\"FormsControls_error__3FPkv\",\"warning\":\"FormsControls_warning__3-9Ji\",\"redux_form\":\"FormsControls_redux_form__2KMqr\",\"formButtons\":\"FormsControls_formButtons__2Il_5\",\"formSummaryError\":\"FormsControls_formSummaryError__M0EwL\",\"header\":\"FormsControls_header__23ev9\",\"wholeForm\":\"FormsControls_wholeForm__2BeEg\",\"operationContainer\":\"FormsControls_operationContainer__3DNz2\",\"operationHeader\":\"FormsControls_operationHeader__1NgkQ\",\"imgContainer\":\"FormsControls_imgContainer__yj_cs\",\"uploadIcon\":\"FormsControls_uploadIcon__1W7OA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Preloader_container__1VGeq\"};","export default __webpack_public_path__ + \"static/media/Upload-icon.0ffb4073.png\";","import React, { useRef, useEffect } from \"react\";\r\nimport styles from \"./FormsControls.module.scss\";\r\nimport { Field } from \"redux-form\";\r\nimport PropTypes from \"prop-types\";\r\nimport uploadIcon from \"../../assets/images/Upload-icon.png\";\r\n\r\n// field-level validation\r\nconst FormControl = ({\r\n  input,\r\n  meta: { touched, error, warning },\r\n  children,\r\n}) => {\r\n  const hasError = touched && error;\r\n  const hasWarn = touched && warning;\r\n  return (\r\n    <div\r\n      className={\r\n        styles.formControl +\r\n        \" \" +\r\n        (hasError ? styles.error : \"\") +\r\n        \" \" +\r\n        (hasWarn ? styles.warning : \"\")\r\n      }\r\n    >\r\n      {children}\r\n      {(hasError && <span>{error}</span>) ||\r\n        (hasWarn && <span>{warning}</span>)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const TextArea = (props) => {\r\n  const { input, meta, child, ...restProps } = props;\r\n  return (\r\n    <FormControl {...props}>\r\n      <textarea {...input} {...restProps} ref={props.refa} />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport function Input(props) {\r\n  const { input, meta, child, ...restProps } = props;\r\n\r\n  // Для установления последнего выбранного значения даты окончания скидки\r\n  // и отмены значения по умолчанию если props.input.value не пустое\r\n  const newRP = !props.input.value\r\n    ? props.lastDateValue\r\n      ? { ...restProps, value: props.lastDateValue }\r\n      : restProps\r\n    : restProps;\r\n\r\n  return (\r\n    <FormControl {...props}>\r\n      <input {...input} ref={props.refa} {...newRP} />\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nexport const createField = (\r\n  placeholder,\r\n  name,\r\n  component,\r\n  validators,\r\n  props = {},\r\n  text = \"\"\r\n) => {\r\n  return (\r\n    <div className=\"\">\r\n      <Field\r\n        placeholder={placeholder}\r\n        name={name}\r\n        component={component}\r\n        validate={validators}\r\n        {...props}\r\n      />\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction usePrevious(value) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\nexport function ImageField({\r\n  // mimeType = \"image/jpeg, image/png\",\r\n  // maxWidth = 4000,\r\n  // minHeight = 200,\r\n  // minWidth = 200,\r\n  // maxHeight = 4000,\r\n  ...props\r\n}) {\r\n  const previewRef = useRef(null);\r\n\r\n  const prevValue = usePrevious(props.meta.pristine);\r\n  useEffect(() => {\r\n    if (prevValue === false && props.meta.pristine === true) {\r\n      previewRef.current.src = \"\";\r\n    }\r\n  }, [props.meta.pristine]);\r\n\r\n  const handlePreview = (imageUrl) => {\r\n    const previewImageDom = previewRef.current;\r\n    previewImageDom.src = imageUrl;\r\n  };\r\n\r\n  const handleChange = (event, input) => {\r\n    event.preventDefault();\r\n    let imageFile = event.target.files[0];\r\n    if (imageFile) {\r\n      const localImageUrl = URL.createObjectURL(imageFile);\r\n      const imageObject = new window.Image();\r\n\r\n      imageObject.onload = () => {\r\n        imageFile.width = imageObject.naturalWidth;\r\n        imageFile.height = imageObject.naturalHeight;\r\n        input.onChange(imageFile);\r\n        URL.revokeObjectURL(imageFile);\r\n      };\r\n      imageObject.src = localImageUrl;\r\n      handlePreview(localImageUrl);\r\n    }\r\n    event.currentTarget.value = null;\r\n  };\r\n\r\n  const { input, meta, child, ...restProps } = props;\r\n  return (\r\n    <FormControl {...props}>\r\n      <div className={styles.imgContainer}>\r\n        <img\r\n          src={\"\"}\r\n          alt={props.alt}\r\n          className=\"preview-image\"\r\n          ref={previewRef}\r\n        />\r\n      </div>\r\n      <label for={\"thatImage\"} className={styles.uploadIcon}>\r\n        <img\r\n          src={uploadIcon}\r\n          style={{ width: \"100px\", height: \"100px\" }}\r\n          alt={\"nothing\"}\r\n        />\r\n      </label>\r\n      <input\r\n        id={\"thatImage\"}\r\n        name={input.name}\r\n        style={{ opacity: 0, height: \"0px\" }}\r\n        type=\"file\"\r\n        accept={props.mimeType}\r\n        onChange={(event) => handleChange(event, input)}\r\n        {...restProps}\r\n      />\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nImageField.propTypes = {\r\n  mimeType: PropTypes.string,\r\n  maxWidth: PropTypes.number,\r\n  maxHeight: PropTypes.number,\r\n  minWidth: PropTypes.number,\r\n  minHeight: PropTypes.number,\r\n  // redux-form props\r\n  handleSubmit: PropTypes.func.isRequired,\r\n};\r\n","export const requiredField = (value) => {\r\n  if (value) return void 0;\r\n  return \"Обязательное поле!\";\r\n};\r\n\r\nconst maxLength = (max) => (value) =>\r\n  value && value.length > max ? `Допустимо не более ${max} символов` : void 0;\r\n\r\nconst minLength = (min) => (value) =>\r\n  value && value.length < min ? `Допустимо не менее ${min} символов` : void 0;\r\n\r\n// заголовок\r\nexport const minLength20 = minLength(20);\r\nexport const maxLength60 = maxLength(60);\r\n\r\nexport const acceptableName = (value) => {\r\n  if (minLength20(value) === void 0 && maxLength60(value) === void 0)\r\n    return void 0;\r\n  return \"Mинимум 20, максимум 60 символов\";\r\n};\r\n// описание товара\r\nexport const maxLength200 = maxLength(200);\r\n//   цена\r\nexport const acceptablePrice = (value) => {\r\n  if (value === void 0) return void 0;\r\n  let val = +value;\r\n  if (val.toFixed(2) == val) {\r\n    const [min, max] = [0.0, 99999999.99];\r\n    if (min <= val && val <= max) {\r\n      return void 0;\r\n    }\r\n  }\r\n  return \"Цена должна быть в формате с 2 числами после запятой: '0.00'. Максимальное значение: '99999999.99'\";\r\n};\r\n// Процент скидки\r\nexport const acceptableDiscount = (value) => {\r\n  if (value === void 0) return void 0;\r\n  let val = +value;\r\n  if (Number.isInteger(val)) {\r\n    if (10 <= val && val <= 90) {\r\n      return void 0;\r\n    } else {\r\n      return \"Число не в пределах 10-90 %\";\r\n    }\r\n  } else {\r\n    return \"Число не целое\";\r\n  }\r\n};\r\n\r\n//  \tДата окончания скидки\r\nexport const acceptableDiscountEndDate = (value) => {\r\n  if (value === void 0) return void 0;\r\n  if (Date.parse(value) > +new Date()) return void 0;\r\n  return \"Дата окончания скидки должна быть больше текущей даты\";\r\n};\r\n\r\nexport const validate = (values) => {\r\n  const errors = {};\r\n  if (values.discount) {\r\n    if (!values.discountEndTime) {\r\n      errors.discountEndTime = \"Обязательное поле!\";\r\n    }\r\n  } else if (values.discountEndTime) {\r\n    if (!values.discount) {\r\n      errors.discount = \"Обязательное поле!\";\r\n    }\r\n  }\r\n  return errors;\r\n};\r\n\r\n// image validation\r\n\r\nexport const validateImageWidth = (minWidth, maxWidth) => (imageFile) => {\r\n  if (imageFile) {\r\n    if (imageFile.width > maxWidth || imageFile.width < minWidth) {\r\n      return `Ширина картинки должна быть не менее ${minWidth}px  не более ${maxWidth}px`;\r\n    }\r\n  }\r\n};\r\nexport const validateImageHeight = (minHeight, maxHeight) => (imageFile) => {\r\n  if (imageFile) {\r\n    if (imageFile.height > maxHeight || imageFile.height < minHeight) {\r\n      return `Высота картинки должна быть не менее ${minHeight}px и не более ${maxHeight}px`;\r\n    }\r\n  }\r\n};\r\nexport const validateImageFormat = (mimeType) => (imageFile) => {\r\n  if (imageFile) {\r\n    if (!mimeType.includes(imageFile.type)) {\r\n      return `Тип картинки должен быть одним из: ${mimeType}`;\r\n    }\r\n  }\r\n};\r\n\r\nexport const imageWidth_200_4000 = validateImageWidth(200, 4000);\r\nexport const imageHeight_200_4000 = validateImageHeight(200, 4000);\r\nexport const imageFormat = validateImageFormat(\"image/jpeg, image/png\");\r\n","// import ProductDataService from \"../firebase-service/product-service\";\r\nimport firebase from \"../firebase-service/firebase\";\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\";\r\n\r\nlet initialState = {\r\n  userId: null,\r\n  email: null,\r\n  isAuth: false,\r\n};\r\nconst authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_USER_DATA:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return { ...state };\r\n  }\r\n};\r\n\r\nexport const setAuthUserData = (userId, email, isAuth) => ({\r\n  type: SET_USER_DATA,\r\n  payload: { userId, email, isAuth },\r\n});\r\n\r\nexport const checkIfLogin = () => async (dispatch) => {\r\n  return new Promise((resolve) => {\r\n    firebase.auth().onAuthStateChanged(function (user) {\r\n      if (user) {\r\n        resolve(dispatch(setAuthUserData(user.uid, user.email, true)));\r\n        return true;\r\n      } else {\r\n        // No user is signed in.\r\n        console.log(\"no login\");\r\n        resolve(dispatch(setAuthUserData(null, null, false)));\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nexport const signup = (email, password) => async (dispatch) => {\r\n  try {\r\n    await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    dispatch(stopSubmit(\"signup\", { _error: err.message }));\r\n  }\r\n};\r\n\r\nexport const signin = (email, password) => async (dispatch) => {\r\n  try {\r\n    let response = await firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password);\r\n    dispatch(setAuthUserData(response.user.uid, email, true));\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    dispatch(stopSubmit(\"signin\", { _error: err.message }));\r\n  }\r\n};\r\n\r\nexport const signout = () => async (dispatch) => {\r\n  try {\r\n    await firebase.auth().signOut();\r\n    dispatch(setAuthUserData(null, null, false));\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    dispatch(stopSubmit(\"sigput\", { _error: err.message }));\r\n  }\r\n};\r\n\r\nexport default authReducer;\r\n","import { checkIfLogin } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_SUCCESS\";\r\n\r\nlet initialState = {\r\n  initialized: false,\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case INITIALIZED_SUCCESS:\r\n      return {\r\n        ...state,\r\n        initialized: true,\r\n      };\r\n    default:\r\n      return { ...state };\r\n  }\r\n};\r\n\r\nexport const initializedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\nexport const initializeApp = () => (dispatch) => {\r\n  let promise = dispatch(checkIfLogin());\r\n\r\n  Promise.all([promise]).then(() => {\r\n    dispatch(initializedSuccess());\r\n  });\r\n};\r\nexport default appReducer;\r\n","import React from \"react\";\r\n\r\nexport function withSuspense(WrappedComponent) {\r\n  return (props) => {\r\n    return (\r\n      <React.Suspense\r\n        fallback={\r\n          <div\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              textAlign: \"center\",\r\n              fontSize: \"40px\",\r\n            }}\r\n          >\r\n            Loading...\r\n          </div>\r\n        }\r\n      >\r\n        <WrappedComponent {...props} />\r\n      </React.Suspense>\r\n    );\r\n  };\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport {\r\n  Input,\r\n  createField,\r\n  ImageField,\r\n  TextArea,\r\n} from \"../FormsControls/FormsControls\";\r\nimport {\r\n  acceptableName,\r\n  maxLength200,\r\n  acceptablePrice,\r\n  acceptableDiscount,\r\n  acceptableDiscountEndDate,\r\n  validate,\r\n  imageFormat,\r\n  imageWidth_200_4000,\r\n  imageHeight_200_4000,\r\n} from \"../FormsControls/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { getProduct, updateProduct } from \"../../redux/product-reducer\";\r\nimport styles from \"../FormsControls/FormsControls.module.scss\";\r\nimport productStyles from \"./Product.module.scss\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport withAuthRedirect from \"../HOCS/withAuthRedirect\";\r\nimport { getStringDate } from \"../../utils/utils\";\r\n\r\n// can show the summary error\r\n// form-level validation\r\nconst UpdateProductForm = (props) => {\r\n  const [productState, setPS] = useState(\r\n    Object.values(props.product).reduce(\r\n      (acum, val) => ((acum[val] = false), acum),\r\n      {}\r\n    )\r\n  );\r\n  const { handleSubmit, pristine, reset, submitting, error, product } = props;\r\n\r\n  const activate = (id) => {\r\n    setPS({ ...productState, [id]: true });\r\n  };\r\n\r\n  // if new data were passed -> it will become as input fields\r\n  const [setled, setSetled] = useState({});\r\n\r\n  const setNewProductR = useRef({});\r\n  function deactivate(id) {\r\n    if (\r\n      setNewProductR.current &&\r\n      setNewProductR.current.value !== void 0 &&\r\n      setNewProductR.current.value !== \"\"\r\n    ) {\r\n      setSetled((dict) => ({ ...dict, [id]: true }));\r\n      setNewProductR.current = void 0;\r\n    } else {\r\n      setPS({ ...productState, [id]: false });\r\n    }\r\n  }\r\n\r\n  const namelabel = \"Наименование товара\";\r\n  const photolabelOld = \"Текущее фото товара\";\r\n  const photolabel = \"Новое фото товара\";\r\n  const desclabel = \"Описание товара\";\r\n  const pricelabel = \"Цена товара\";\r\n  const disclabel = \"Скидка\";\r\n  const discountEndTimeabel = \"Дата окончания акции\";\r\n\r\n  const fieldsNames = {\r\n    name: \"name\",\r\n    photo: \"photo\",\r\n    description: \"description\",\r\n    price: \"price\",\r\n    discount: \"discount\",\r\n    discountEndTime: \"discountEndTime\",\r\n  };\r\n\r\n  const generOwnProps = (fieldsName) => ({\r\n    onBlur: () => {\r\n      !setled[fieldsName] && deactivate(fieldsName);\r\n    },\r\n    onFocus: () => {\r\n      activate(fieldsName);\r\n    },\r\n    autoFocus: true,\r\n    refa: setNewProductR,\r\n  });\r\n\r\n  // create all fields except photo\r\n  const createProductField = (\r\n    fieldName,\r\n    label,\r\n    component,\r\n    validators = [],\r\n    innerProps = {},\r\n    specialField // date field or photo upload field\r\n  ) => (\r\n    <>\r\n      <div className={productStyles.fieldDescr}>{label}</div>\r\n      {specialField || productState[fieldName] ? (\r\n        createField(\r\n          `${product[fieldName] || \"...\"}`,\r\n          fieldName,\r\n          component,\r\n          validators,\r\n          {\r\n            ...innerProps,\r\n            ...generOwnProps(fieldName),\r\n          }\r\n        )\r\n      ) : (\r\n        <div\r\n          className={productStyles.hotUpdate}\r\n          id={fieldName}\r\n          onClick={() => activate(fieldName)}\r\n        >\r\n          {product[fieldName] || \"...\"}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  const minDate = getStringDate();\r\n  const lastDate = getStringDate(product.discountEndTime);\r\n  console.log(lastDate);\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.wholeForm}>\r\n      {/* key, name, price, discount, discountEndTime, photo */}\r\n\r\n      {createProductField(fieldsNames.name, namelabel, TextArea, [\r\n        acceptableName,\r\n      ])}\r\n\r\n      <div className={productStyles.fieldDescr}>{photolabelOld}</div>\r\n      <div className={productStyles.imgMiddleContainer}>\r\n        <img src={product.photo} alt=\"Data\" />\r\n      </div>\r\n\r\n      {createProductField(\r\n        fieldsNames.photo,\r\n        photolabel,\r\n        ImageField,\r\n        [imageFormat, imageWidth_200_4000, imageHeight_200_4000],\r\n        {\r\n          mimeType: \"image/jpeg, image/png\",\r\n          maxWidth: 4000,\r\n          minHeight: 200,\r\n          minWidth: 200,\r\n          maxHeight: 4000,\r\n          alt: \"Фото товара\",\r\n        },\r\n        true\r\n      )}\r\n      {createProductField(fieldsNames.description, desclabel, TextArea, [\r\n        maxLength200,\r\n      ])}\r\n      {createProductField(fieldsNames.price, pricelabel, Input, [\r\n        acceptablePrice,\r\n      ])}\r\n      {createProductField(fieldsNames.discount, disclabel, Input, [\r\n        acceptableDiscount,\r\n      ])}\r\n      {createProductField(\r\n        fieldsNames.discountEndTime,\r\n        discountEndTimeabel,\r\n        Input,\r\n        [acceptableDiscountEndDate],\r\n        {\r\n          type: \"date\",\r\n          min: minDate,\r\n          lastDateValue: lastDate,\r\n          // dateValue: lastDate,\r\n        },\r\n        true\r\n      )}\r\n      {error && <div className={styles.formSummaryError}>{error}</div>}\r\n      <div className=\"\">\r\n        <button type=\"submit\" disabled={pristine || submitting}>\r\n          Обновить\r\n        </button>\r\n      </div>\r\n      <div className=\"\">\r\n        <button type=\"button\" disabled={pristine || submitting} onClick={reset}>\r\n          Очистить значения\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst UpdateProductReduxForm = reduxForm({\r\n  form: \"updateProduct\",\r\n  validate,\r\n})(UpdateProductForm);\r\n\r\nconst UpdateProduct = ({\r\n  updateProduct,\r\n  getProduct,\r\n  currentProduct,\r\n  isFetching,\r\n  ...props\r\n}) => {\r\n  const [hasCP, setCP] = useState(false);\r\n\r\n  const refUpdated = useRef();\r\n\r\n  useEffect(() => {\r\n    if (refUpdated.current) {\r\n      props.history.push(\"/catalog\");\r\n    }\r\n  }, [isFetching]);\r\n\r\n  const onSubmit = async (formData) => {\r\n    if (formData.discountEndTime) {\r\n      formData.discountEndTime = Date.parse(formData.discountEndTime);\r\n    }\r\n\r\n    if (formData.photo) {\r\n      formData = { ...formData, newPhoto: true };\r\n    }\r\n    let newProd = { ...currentProduct, ...formData };\r\n\r\n    console.log(currentProduct);\r\n    await updateProduct(currentProduct.key, newProd);\r\n    refUpdated.current = true;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      let productKey = props.match.params.productKey; // productKey\r\n      if (!productKey) {\r\n        //   <Redirect to=\"/catalog\" />;\r\n        props.history.push(\"/catalog\");\r\n      } else {\r\n        await getProduct(productKey);\r\n        setCP(true);\r\n      }\r\n    };\r\n    if (!hasCP) {\r\n      fetchProduct();\r\n    }\r\n  }, [props.match.params.key, getProduct, props.history, hasCP]);\r\n\r\n  if (!hasCP) return <Preloader />;\r\n  return (\r\n    <>\r\n      <div className={productStyles.productOperationContainer}>\r\n        <h1 className={productStyles.productOperationHeader}>Обновить товар</h1>\r\n        <UpdateProductReduxForm onSubmit={onSubmit} product={currentProduct} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isFetching: state.products.isFetching,\r\n  currentProduct: state.products.selectedProduct,\r\n});\r\n\r\nexport default compose(\r\n  withAuthRedirect,\r\n  connect(mapStateToProps, { getProduct, updateProduct }),\r\n  withRouter\r\n)(UpdateProduct);\r\n","// //  material ui\r\n// import Avatar from \"@material-ui/core/Avatar\";\r\n// import Button from \"@material-ui/core/Button\";\r\n// import CssBaseline from \"@material-ui/core/CssBaseline\";\r\n// import TextField from \"@material-ui/core/TextField\";\r\n// import FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\n// import Checkbox from \"@material-ui/core/Checkbox\";\r\n// import Link from \"@material-ui/core/Link\";\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import Box from \"@material-ui/core/Box\";\r\n// import LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\n// import Typography from \"@material-ui/core/Typography\";\r\n// import { makeStyles } from \"@material-ui/core/styles\";\r\n// import Container from \"@material-ui/core/Container\";\r\n// // material ui\r\n\r\n// // material ui\r\n\r\n// function Copyright() {\r\n//   return (\r\n//     <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n//       {\"Copyright © \"}\r\n//       <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n//         Your Website\r\n//       </Link>{\" \"}\r\n//       {new Date().getFullYear()}\r\n//       {\".\"}\r\n//     </Typography>\r\n//   );\r\n// }\r\n\r\n// const useStyles = makeStyles((theme) => ({\r\n//   paper: {\r\n//     marginTop: theme.spacing(8),\r\n//     display: \"flex\",\r\n//     flexDirection: \"column\",\r\n//     alignItems: \"center\",\r\n//   },\r\n//   avatar: {\r\n//     margin: theme.spacing(1),\r\n//     backgroundColor: theme.palette.secondary.main,\r\n//   },\r\n//   form: {\r\n//     width: \"100%\", // Fix IE 11 issue.\r\n//     marginTop: theme.spacing(1),\r\n//   },\r\n//   submit: {\r\n//     margin: theme.spacing(3, 0, 2),\r\n//   },\r\n// }));\r\n// // material ui\r\n\r\nimport React from \"react\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport { Input, createField } from \"../../FormsControls/FormsControls\";\r\nimport { requiredField } from \"../../FormsControls/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { signin } from \"../../../redux/auth-reducer\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport styles from \"../../FormsControls/FormsControls.module.scss\";\r\n\r\n// can show the summary error\r\n// form-level validation\r\nconst SigninForm = (props) => {\r\n  const { handleSubmit, pristine, reset, submitting, error } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.wholeForm}>\r\n      {createField(\"Email\", \"email\", Input, [requiredField])}\r\n      {createField(\"Password\", \"password\", Input, [requiredField], {\r\n        type: \"password\",\r\n      })}\r\n      {error && <div className={styles.formSummaryError}>{error}</div>}\r\n      <div className=\"\">\r\n        <button type=\"submit\" disabled={pristine || submitting}>\r\n          Войти\r\n        </button>\r\n      </div>\r\n      <div className=\"\">\r\n        <button type=\"button\" disabled={pristine || submitting} onClick={reset}>\r\n          Очистить значения\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst SigninReduxForm = reduxForm({ form: \"signin\" })(SigninForm);\r\n\r\nconst Signin = (props) => {\r\n  const onSubmit = (formData) => {\r\n    props.signin(formData.email, formData.password);\r\n  };\r\n  if (props.isAuth) return <Redirect to=\"/catalog\" />;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.operationContainer}>\r\n        <h1 className={styles.operationHeader}>Войти в аккаунт</h1>\r\n        <SigninReduxForm onSubmit={onSubmit} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { signin })(Signin);\r\n\r\n// export default class SignIn extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//     this.state = {\r\n//       email: \"\",\r\n//       password: \"\",\r\n//       hasAccout: false,\r\n//       name: \"\",\r\n//     };\r\n//   }\r\n//   componentDidMount() {\r\n//     const db = firebase.database();\r\n//     const name = db.ref(\"name\");\r\n//     name.on(\"value\", (elem) => this.setState({ name: elem.val() }));\r\n//   }\r\n\r\n//   handleChange = ({ target: { value, id } }) => {\r\n//     this.setState({ [id]: value });\r\n//   };\r\n\r\n//   signInAcc = () => {\r\n//     const { email, password } = this.state;\r\n//     // signup\r\n//     // firebase\r\n//     //   .auth()\r\n//     //   .createUserWithEmailAndPassword(email, password)\r\n//     //   .catch((error) => console.log(error));\r\n\r\n//     // login (signin)\r\n//     firebase\r\n//       .auth()\r\n//       .signInWithEmailAndPassword(email, password)\r\n//       .then((response) => {\r\n//         console.log(response);\r\n//         this.setState({ hasAccout: true });\r\n//       })\r\n//       .catch((error) => console.log(error));\r\n//   };\r\n\r\n//   render() {\r\n//     // console.log(this.state);\r\n//     return (\r\n//       <>\r\n//         {this.state.hasAccout ? (\r\n//           <div className=\"className\">hello</div>\r\n//         ) : (\r\n//           <div className=\"login_block\">\r\n//             <input\r\n//               type=\"text\"\r\n//               placeholder=\"email\"\r\n//               id=\"email\"\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             <input\r\n//               type=\"password\"\r\n//               placeholder=\"password\"\r\n//               id=\"password\"\r\n//               onChange={this.handleChange}\r\n//             />\r\n//             <input type=\"submit\" onClick={this.signInAcc} />\r\n//           </div>\r\n//         )}\r\n//       </>\r\n//     );\r\n//   }\r\n// }\r\n","import React, { useState } from \"react\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport { Input, createField } from \"../../FormsControls/FormsControls\";\r\nimport { requiredField } from \"../../FormsControls/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { signup } from \"../../../redux/auth-reducer\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport styles from \"../../FormsControls/FormsControls.module.scss\";\r\n\r\n// can show the summary error\r\n// form-level validation\r\nconst SignUpForm = (props) => {\r\n  const { handleSubmit, pristine, reset, submitting, error } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.wholeForm}>\r\n      {createField(\"Email\", \"email\", Input, [requiredField])}\r\n      {createField(\"Password\", \"password\", Input, [requiredField], {\r\n        type: \"password\",\r\n      })}\r\n      {error && <div className={styles.formSummaryError}>{error}</div>}\r\n      <div className=\"\">\r\n        <button type=\"submit\" disabled={pristine || submitting}>\r\n          Создать\r\n        </button>\r\n      </div>\r\n      <div className=\"\">\r\n        <button type=\"button\" disabled={pristine || submitting} onClick={reset}>\r\n          Очистить значения\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst SignUpReduxForm = reduxForm({ form: \"signup\" })(SignUpForm);\r\n\r\nconst SignUp = (props) => {\r\n  // const [shouldRedirect, setSR] = useState(false)\r\n  const onSubmit = (formData) => {\r\n    props.signup(formData.email, formData.password);\r\n  };\r\n  // if (props.isAuth) return <Redirect to=\"/signin\" />;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.operationContainer}>\r\n        <h1 className={styles.operationHeader}>Создать аккаунт</h1>\r\n        <SignUpReduxForm onSubmit={onSubmit} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { signup })(SignUp);\r\n","import React from \"react\";\r\n// import Header from \"./Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { signout } from \"../../redux/auth-reducer\";\r\n\r\nimport s from \"./Header.module.scss\";\r\nimport { NavLink } from \"react-router-dom\";\r\n// import mylogo from \"../../assets/images/mylogo.png\";\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={s.header}>\r\n      {/* <img src={mylogo} /> */}\r\n\r\n      {props.isAuth ? (\r\n        <div className={s.loginBlock}>\r\n          {props.email} - <a onClick={props.signout}>Выйти</a>\r\n        </div>\r\n      ) : (\r\n        <div className={s.loginBlock}>\r\n          <NavLink to={\"/signin\"}>Войти</NavLink>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\n// export default Header;\r\n\r\nclass HeaderContainer extends React.Component {\r\n  // componentDidMount() {\r\n  //   this.props.getAuthUserData();\r\n  // }\r\n\r\n  render() {\r\n    return <Header {...this.props} />;\r\n  }\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  email: state.auth.email,\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { signout })(HeaderContainer);\r\n","import React from \"react\";\r\nimport s from \"./Navbar.module.scss\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n  return (\r\n    <nav className={s.nav}>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/catalog\" activeClassName={s.activeLink}>\r\n          Каталог товаров\r\n        </NavLink>\r\n      </div>\r\n\r\n      <div className={`${s.item} `}>\r\n        <NavLink to=\"/add_product\" activeClassName={s.activeLink}>\r\n          Добавить товар\r\n        </NavLink>\r\n      </div>\r\n\r\n      <div className={`${s.item}  `}>\r\n        <NavLink to=\"/signin\" activeClassName={s.activeLink}>\r\n          Войти\r\n        </NavLink>\r\n      </div>\r\n\r\n      <div className={`${s.item} `}>\r\n        <NavLink to=\"/signup\" activeClassName={s.activeLink}>\r\n          Зарегестрироватся\r\n        </NavLink>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useEffect } from \"react\";\nimport { Route, withRouter } from \"react-router-dom\";\nimport \"./App.scss\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\n\nimport { initializeApp } from \"./redux/app-reducer\";\n\nimport { withSuspense } from \"./components/HOCS/withSuspense\";\n\nimport UpdateProduct from \"./components/Catalog/UpdateProduct\";\nimport SignIn from \"./components/Auth/SignIn/SignIn\";\nimport SignUp from \"./components/Auth/SignUp/SignUp\";\n\nimport Header from \"./components/Header/Header\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport Preloader from \"./components/Preloader/Preloader\";\n\n// Ленивая загрузка выполнена из соображений о том что при перезагрузке страницы теряется state переменная isAuth,\n// и если пользователь еще не залогинен то все в порядке ибо его перенаправит на страницу\n// /signin ( так как я использую хок с перенаправлением на логин, если пользователь не авторизован ).\n// А вот если пользователь уже залогинен, то токен авторизации от firebase все еще хранится в indexedDB,\n// а значит при запросе onAuthStateChanged получит true и сразу же установит isAuth в true.\n// Проблема в том что будет происходить перенаправление с любой страницы на страницу /signin, а потом оттуда\n// почти сразу же на /catalog, и мало того что это будет выглядеть сумбурно, так еще и невозможно будет оставаться\n// на страницах обновления и создания товара.\nconst Catalog = React.lazy(() => import(\"./components/Catalog/Catalog\"));\nconst AddProduct = React.lazy(() => import(\"./components/Catalog/AddProduct\"));\n\nconst SuspendedCatalog = withSuspense(Catalog);\nconst SuspendedAddProduct = withSuspense(AddProduct);\nconst App = React.memo((props) => {\n  useEffect(() => {\n    props.initializeApp();\n  }, [props.initializeApp]);\n  if (!props.initialized) return <Preloader />;\n  console.log(\"here\");\n  return (\n    <div className=\"app-wrapper\">\n      <Header />\n      <Navbar />\n      <div className=\"app-wrapper-content\">\n        <Route\n          exact\n          path={[\"/catalog\", \"/\"]}\n          render={() => <SuspendedCatalog />}\n        />\n\n        <Route path=\"/add_product\" render={() => <SuspendedAddProduct />} />\n        <Route\n          exact\n          path=\"/catalog/:productKey\"\n          render={() => <UpdateProduct />}\n        />\n        <Route path=\"/signin\" render={() => <SignIn />} />\n        <Route path=\"/signup\" render={() => <SignUp />} />\n      </div>\n    </div>\n  );\n});\n\n// export default withRouter(App);\nconst mapStateToProps = (state) => ({\n  initialized: state.app.initialized,\n});\n\nexport default compose(\n  withRouter,\n  connect(mapStateToProps, { initializeApp })\n)(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { applyMiddleware, combineReducers, createStore, compose } from \"redux\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport productReducer from \"./product-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\n\r\n// import\r\n\r\nconst reducers = combineReducers({\r\n  form: formReducer,\r\n  app: appReducer,\r\n  auth: authReducer,\r\n  products: productReducer,\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(thunkMiddleware))\r\n);\r\n\r\nwindow.__store__ = store;\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\nimport store from \"./redux/redux-store\";\n\nimport { Provider } from \"react-redux\";\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__12XVe\",\"item\":\"Navbar_item__24jqm\",\"activeLink\":\"Navbar_activeLink__2-6Px\"};","import * as firebase from \"firebase\";\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB232ly-YH5BqFVivK6cZwpFCem-6F0Csk\",\r\n  authDomain: \"testproj-30b12.firebaseapp.com\",\r\n  databaseURL: \"https://testproj-30b12-default-rtdb.firebaseio.com\",\r\n  projectId: \"testproj-30b12\",\r\n  storageBucket: \"testproj-30b12.appspot.com\",\r\n  messagingSenderId: \"288859036226\",\r\n  appId: \"1:288859036226:web:2256619dd7e9892dac2bdb\",\r\n  measurementId: \"G-6BVLDP7VT0\",\r\n};\r\nconst persistance = firebase.auth.Auth.Persistence.LOCAL;\r\nconst app = !firebase.apps.length\r\n  ? firebase.initializeApp(firebaseConfig)\r\n  : firebase.app();\r\napp.auth().setPersistence(persistance);\r\nexport default app;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgSmallContainer\":\"Product_imgSmallContainer__JX_R7\",\"imgMiddleContainer\":\"Product_imgMiddleContainer__1TK93\",\"productOperationContainer\":\"Product_productOperationContainer__2CSib\",\"productContainer\":\"Product_productContainer__3MSFE\",\"fieldDescr\":\"Product_fieldDescr__1aSMZ\",\"hotUpdate\":\"Product_hotUpdate__3MCCN\",\"discount\":\"Product_discount__184h9\",\"empty\":\"Product_empty__2y2V-\",\"productHeader\":\"Product_productHeader__H-xzy\",\"operationBlock\":\"Product_operationBlock__2SfVL\",\"delete\":\"Product_delete__1NFzJ\",\"productOperationHeader\":\"Product_productOperationHeader__2BJsy\",\"productAdded\":\"Product_productAdded__3IIyZ\",\"catalog\":\"Product_catalog__3f8H9\"};","import firebase from \"./firebase\";\r\n// console.log(firebase);\r\nconst db = firebase.database().ref(\"/products\");\r\nconst storage = firebase.storage().ref(\"/images\");\r\n\r\nclass ProductDataService {\r\n  // getImage (image) {\r\n  //   storage.child(`${image}.png`).getDownloadURL().then((url) => {\r\n  //     this.state[image] = url\r\n  //     this.setState(this.state)\r\n  //   })\r\n  // }\r\n\r\n  isFileExists(fileName) {\r\n    return new Promise((resolve) => {\r\n      storage\r\n        .child(fileName)\r\n        .getDownloadURL()\r\n        .then((url) => {\r\n          console.log(\"File exists\");\r\n          resolve(true);\r\n        })\r\n        .catch(() => {\r\n          console.log(\"File doesn't exist\");\r\n          resolve(false);\r\n        });\r\n    });\r\n  }\r\n\r\n  removeFile(fileUrl) {\r\n    let imageRef = storage.child(fileUrl);\r\n    imageRef\r\n      .delete()\r\n      .then(function () {\r\n        console.log(\"File deleted successfully\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        console.log(\"Uh-oh, an error occurred!\");\r\n      });\r\n  }\r\n\r\n  loadFile(file, fileName) {\r\n    return new Promise((resolve) => {\r\n      let newImageRef = storage.child(fileName);\r\n      newImageRef.put(file).then(async function (snapshot) {\r\n        console.log(\"Uploaded a blob or file!\");\r\n        console.log(snapshot.metadata);\r\n        let res = await new Promise((res) => {\r\n          storage\r\n            .child(snapshot.metadata.name)\r\n            .getDownloadURL()\r\n            .then((url) => {\r\n              res([url, snapshot.metadata.name]);\r\n            });\r\n        });\r\n        resolve(res);\r\n      });\r\n    });\r\n    // return newImageRef; // name // fullPath\r\n  }\r\n  getAll() {\r\n    // console.log(db.databease);\r\n    // console.log(db.databease());\r\n    return db;\r\n  }\r\n\r\n  get(key) {\r\n    return db.child(key);\r\n  }\r\n\r\n  // getPaginative(start, number) {\r\n  //   // or  by timestamp date\r\n  //   return db.orderByChild(\"id\").startAt(start).limitToFirst(number);\r\n  //   // return db\r\n  //   //   .orderByChild(\"id\")\r\n  //   //   .startAt((start - 1) * number + 1) //start position 1 if page 1; (ps=5)// 6 if 2\r\n  //   //   .limitToFirst(number);\r\n  // }\r\n\r\n  create(product) {\r\n    return db.push(product);\r\n  }\r\n\r\n  update(key, value) {\r\n    return db.child(key).update(value);\r\n  }\r\n\r\n  delete(key) {\r\n    return db.child(key).remove();\r\n  }\r\n\r\n  deleteAll() {\r\n    return db.remove();\r\n  }\r\n}\r\n\r\nexport default new ProductDataService();\r\n","import ProductDataService from \"../firebase-service/product-service\";\r\nimport { stopSubmit, reset } from \"redux-form\";\r\n\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\r\n//catalog paginative -- get\r\nconst SET_PRODUCTS = \"SET_PRODUCTS\";\r\nconst SELECT_PRODUCT = \"SELECT_PRODUCT\";\r\n// put\r\nconst UPDATE_PRODUCT = \"UPDATE_PRODUCT\";\r\n// post\r\n// const ADD_PRODUCT = \"ADD_PRODUCT\";\r\n// delete\r\nconst DELETE_PRODUCT = \"DELETE_PRODUCT\";\r\n\r\nconst SET_LOADED_IMAGE_LINK = \"SET_LOADED_IMAGE_LINK\";\r\n\r\n// const SET_UPDATED = \"SET_UPDATED\";\r\n// const SET_ADDED = \"SET_ADDED\";\r\n\r\nlet initialState = {\r\n  products: [],\r\n  // pageSize: 5,\r\n  // currentPage: 1,\r\n  isFetching: true,\r\n  selectedProduct: null,\r\n  loadedImageLink: null, // will be an array global//local urls\r\n  // selectedProductKey:null,\r\n  // updated: null, // msgs\r\n  // added: null, // msgs\r\n};\r\n\r\nconst productReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_PRODUCTS: {\r\n      return { ...state, products: action.products };\r\n    }\r\n    // case SET_UPDATED: {\r\n    //   return { ...state, updated: action.updated };\r\n    // }\r\n    // case SET_ADDED: {\r\n    //   return { ...state, added: action.added };\r\n    // }\r\n    case SELECT_PRODUCT: {\r\n      return { ...state, selectedProduct: action.product };\r\n    }\r\n    case SET_LOADED_IMAGE_LINK: {\r\n      return { ...state, loadedImageLink: action.link };\r\n    }\r\n    // case ADD_PRODUCT: {\r\n    //   return { ...state, products: [action.product, ...action.products] };\r\n    // }\r\n    case UPDATE_PRODUCT: {\r\n      return {\r\n        ...state,\r\n        products: state.products.map((product) =>\r\n          product.key === action.productKey\r\n            ? (product = action.newData)\r\n            : product\r\n        ),\r\n      };\r\n    }\r\n    case DELETE_PRODUCT: {\r\n      return {\r\n        ...state,\r\n        products: state.products.filter(\r\n          (product) => product.key !== action.productKey\r\n        ),\r\n      };\r\n    }\r\n    case TOGGLE_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching };\r\n    }\r\n    default:\r\n      return { ...state };\r\n  }\r\n};\r\n\r\nexport const toggleIsFetching = (isFetching) => ({\r\n  type: TOGGLE_IS_FETCHING,\r\n  isFetching,\r\n});\r\n\r\nexport const setProducts = (products) => ({\r\n  type: SET_PRODUCTS,\r\n  products,\r\n});\r\n\r\nexport const selectProduct = (product) => ({\r\n  type: SELECT_PRODUCT,\r\n  product,\r\n});\r\n\r\n// export const setAdded = (added) => ({\r\n//   type: SET_ADDED,\r\n//   added,\r\n// });\r\n// export const setUpdated = (updated) => ({\r\n//   type: SET_UPDATED,\r\n//   updated,\r\n// });\r\n\r\n// const unpackProducts = (items) => async (dispatch) => {\r\n//   console.log(items);\r\n//   let products = [];\r\n\r\n//   items.forEach((item) => {\r\n//     let key = item.key;\r\n//     let data = item.val();\r\n//     products.push({\r\n//       key: key,\r\n//       photo: data.photo,\r\n//       description: data.description,\r\n//       name: data.name,\r\n//       price: data.price,\r\n//       discount: data.discount,\r\n//       discountEndTime: data.discountEndTime,\r\n//     });\r\n//   });\r\n\r\n//   dispatch(setProducts(products));\r\n// };\r\n\r\n// const subMeth = function (dispatch) {\r\n//   return function (items) {\r\n//     dispatch(unpackProducts(items));\r\n//   };\r\n// };\r\n\r\n// export const setLoadedImageLink = (link) => ({\r\n//   type: SET_LOADED_IMAGE_LINK,\r\n//   link,\r\n// });\r\n\r\nexport const loadImage = async (file) => {\r\n  let imageExists = await ProductDataService.isFileExists(file.name);\r\n  let fileName = file.name;\r\n\r\n  if (imageExists) {\r\n    let timestamp = +new Date();\r\n    fileName = `${timestamp}-${fileName}`;\r\n  }\r\n  console.log(fileName);\r\n  let link = await Promise.all([ProductDataService.loadFile(file, fileName)]);\r\n  console.log(\"loadImage /// link\");\r\n  console.log(link);\r\n  return link[0];\r\n  // await Promise.all([ProductDataService.loadFile(file, fileName)]).then(\r\n  //   (link) => {\r\n  //     // dispatch(setLoadedImageLink(link[0]));\r\n  //     resolve(link[0]);\r\n  //   }\r\n  // );\r\n};\r\n\r\nexport const getProducts = () => async (dispatch) => {\r\n  dispatch(toggleIsFetching(true));\r\n  // const dispsubMeth = subMeth(dispatch);\r\n  try {\r\n    await ProductDataService.getAll().once(\"value\", (snap) => {\r\n      let products = [];\r\n      let items = snap.val();\r\n      for (let item in items) {\r\n        console.log(item);\r\n        let key = item;\r\n        let data = items[item];\r\n        products.push({\r\n          key: key,\r\n          photo: data.photo,\r\n          localPhoto: data.localPhoto,\r\n          description: data.description,\r\n          name: data.name,\r\n          price: data.price,\r\n          discount: data.discount,\r\n          discountEndTime: data.discountEndTime,\r\n        });\r\n      }\r\n      products.reverse();\r\n      dispatch(setProducts(products));\r\n    });\r\n    // console.log(response);\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(err.code);\r\n  }\r\n\r\n  dispatch(toggleIsFetching(false));\r\n};\r\n// export const getProducts = (startPage = 1, numberOnPage = 5) => async (\r\n//   dispatch\r\n// ) => {\r\n//   dispatch(toggleIsFetching(true));\r\n\r\n//   try {\r\n//     let response = await ProductDataService.getPaginative(\r\n//       startPage,\r\n//       numberOnPage\r\n//     ).on(\"value\", (items) => dispatch(unpackProducts(items)));\r\n//     console.log(response);\r\n//   } catch (err) {\r\n//     console.log(err.message);\r\n//     console.log(err.code);\r\n//   }\r\n\r\n//   dispatch(toggleIsFetching(false));\r\n// };\r\n\r\nexport const uProduct = (productKey, newData) => ({\r\n  type: UPDATE_PRODUCT,\r\n  productKey,\r\n  newData,\r\n});\r\n\r\nexport const dProduct = (productKey) => ({\r\n  type: DELETE_PRODUCT,\r\n  productKey,\r\n});\r\n\r\n// export const addProduct = (product) => ({\r\n//   type: ADD_PRODUCT,\r\n//   product,\r\n// });\r\n\r\n// TODO to hooks ?????\r\nexport const deleteProduct = (productKey) => async (dispatch) => {\r\n  // FireBase\r\n  dispatch(toggleIsFetching(true));\r\n  try {\r\n    await ProductDataService.get(productKey).once(\"value\", async (snap) => {\r\n      let product = snap.val();\r\n      await ProductDataService.removeFile(product.localPhoto);\r\n    });\r\n    await ProductDataService.delete(productKey);\r\n    dispatch(dProduct(productKey));\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(err.code);\r\n  }\r\n  dispatch(toggleIsFetching(false));\r\n};\r\n\r\nexport const getProduct = (productKey) => async (dispatch) => {\r\n  // FireBase\r\n  dispatch(toggleIsFetching(true));\r\n  try {\r\n    await ProductDataService.get(productKey).once(\"value\", (snap) => {\r\n      console.log(snap.val());\r\n      // console.log(snap);\r\n      console.log(productKey);\r\n      dispatch(selectProduct({ ...snap.val(), key: productKey }));\r\n      dispatch(toggleIsFetching(false));\r\n    });\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(err.code);\r\n    dispatch(toggleIsFetching(false));\r\n  }\r\n};\r\n\r\nexport const addProduct = (product) => async (dispatch) => {\r\n  // FireBase\r\n  dispatch(toggleIsFetching(true));\r\n  try {\r\n    // result to get product key ????\r\n    const [photo, localPhoto] = await loadImage(product.photo);\r\n    await ProductDataService.create({\r\n      ...product,\r\n      photo: photo,\r\n      localPhoto: localPhoto,\r\n    });\r\n    dispatch(reset(\"addProduct\"));\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(err.code);\r\n    dispatch(stopSubmit(\"addProduct\", { _error: err.message }));\r\n  }\r\n  dispatch(toggleIsFetching(false));\r\n};\r\n\r\n// newData = {}\r\nexport const updateProduct = (productKey, newData) => async (\r\n  // FireBase\r\n  dispatch\r\n) => {\r\n  dispatch(toggleIsFetching(true));\r\n  try {\r\n    let photo, localPhoto;\r\n    if (newData.newPhoto) {\r\n      [photo, localPhoto] = await loadImage(newData.photo);\r\n      newData.newPhoto = void 0;\r\n      newData.photo = photo;\r\n      newData.photo = localPhoto;\r\n    }\r\n    await ProductDataService.update(productKey, {\r\n      ...newData,\r\n    });\r\n    dispatch(uProduct(productKey, newData));\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(err.code);\r\n    dispatch(stopSubmit(\"updateProduct\", { _error: err.message }));\r\n  }\r\n  dispatch(toggleIsFetching(false));\r\n};\r\n\r\nexport default productReducer;\r\n","export default __webpack_public_path__ + \"static/media/preloader1.81da48ab.gif\";","import React from \"react\";\r\nimport preloader from \"../../assets/images/preloader1.gif\";\r\nimport s from \"./Preloader.module.scss\";\r\n\r\nlet Preloader = (props) => {\r\n  return (\r\n    <div className={s.container}>\r\n      <img src={preloader} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3FgV1\",\"loginBlock\":\"Header_loginBlock__3Vg1n\"};","export const getStringDate = (date) => {\r\n  if (typeof date === \"number\") {\r\n    // timestamp to date\r\n    date = new Date(date);\r\n  } else if (date === void 0) {\r\n    date = new Date();\r\n  } else if (date instanceof Date) {\r\n  } else {\r\n    // else if its already string or etc - just do nothing\r\n    return date;\r\n  }\r\n\r\n  return `${date.getYear() + 1900}-${\r\n    date.getMonth() + 1 < 10 ? \"0\" + date.getMonth() + 1 : date.getMonth() + 1\r\n  }-${date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()}`;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n  userId: state.auth.userId,\r\n});\r\n\r\nconst withAuthRedirect = (WrappedComponent) => {\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if (!this.props.isAuth) return <Redirect to=\"/signin\" />;\r\n      return <WrappedComponent {...this.props} />;\r\n    }\r\n  }\r\n  return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n};\r\n\r\nexport default withAuthRedirect;\r\n"],"sourceRoot":""}